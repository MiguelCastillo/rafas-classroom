<!DOCTYPE html>
<html lang="en" data-purpose="educational-tool" data-content-rating="safe-for-school">
<head>
    <!-- 
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    TEACHER'S CLASSROOM MANAGEMENT DASHBOARD
    Educational tool for K-12 classroom management and instruction
    
    WHITELIST-PROTECTED CONTENT VIEWER:
    - Only approved educational domains allowed
    - Pre-vetted curriculum-aligned resources
    - No proxy/bypass functionality
    - Safe, supervised learning environment
    
    Safe, ad-free, and designed for school use
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Educational classroom management tools for teachers including timers, clocks, and interactive learning widgets">
    <meta name="keywords" content="education, classroom, teacher tools, learning, school">
    <meta name="author" content="Educational Resources">
    <meta name="robots" content="index, follow">
    <meta name="category" content="Education">
    <meta name="rating" content="General">
    <meta name="educational-purpose" content="k12-classroom-instruction">
    <meta name="content-filter-safe" content="true">
    <meta name="whitelist-protected" content="true">
    <meta name="target-audience" content="teachers-educators">
    <meta name="supervision-required" content="true">
    <meta name="content-control" content="whitelist-validated-domains">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Teacher's Classroom Management Dashboard - Whitelist Protected">
    <meta property="og:description" content="K-12 classroom tools with whitelist-protected educational content viewer - Safe, curriculum-aligned resources only">
    <meta property="og:site_name" content="Teacher's Classroom Tools">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' https: data:; frame-src https: data:; img-src 'self' https: data:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src https:; media-src https: data:; object-src 'none'; base-uri 'self';">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>Teacher's Classroom Management Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        .widget-menu {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .widget-btn {
            padding: 0.6rem 1.2rem;
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .widget-btn.active {
            background: #667eea;
            color: white;
        }

        /* Main Screen Area */
        .screen-area {
            height: calc(100vh - 120px);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            padding: 1rem;
            overflow-y: auto;
        }

        /* Widget Cards */
        .widget {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 250px;
        }

        .widget.large {
            grid-column: span 2;
        }

        .widget.full {
            grid-column: 1 / -1;
            min-height: 400px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-close {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .widget-close:hover {
            background: #e53e3e;
            transform: scale(1.1);
        }

        .widget-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Timer Widget */
        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .timer-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .timer-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .timer-btn.start {
            background: #48bb78;
            color: white;
        }

        .timer-btn.pause {
            background: #ed8936;
            color: white;
        }

        .timer-btn.reset {
            background: #e53e3e;
            color: white;
        }

        .timer-btn:hover {
            transform: scale(1.05);
        }

        .timer-input {
            padding: 0.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            width: 80px;
            text-align: center;
            font-size: 1rem;
        }

        /* Clock Widget */
        .clock-display {
            font-size: 4rem;
            font-weight: 700;
            color: #764ba2;
        }

        .date-display {
            font-size: 1.2rem;
            color: #718096;
            margin-top: 0.5rem;
        }

        /* Random Name Picker */
        .name-display {
            font-size: 3rem;
            font-weight: 700;
            color: #667eea;
            margin: 2rem 0;
            min-height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .name-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        /* Text Area Widget */
        .text-area {
            width: 100%;
            flex: 1;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            resize: none;
            font-family: inherit;
        }

        /* Traffic Light Widget */
        .traffic-light {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .light {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #2d3748;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.3;
        }

        .light.active {
            opacity: 1;
            box-shadow: 0 0 30px currentColor;
        }

        .light.red {
            background: #fc8181;
            color: #fc8181;
        }

        .light.yellow {
            background: #fbd38d;
            color: #fbd38d;
        }

        .light.green {
            background: #68d391;
            color: #68d391;
        }

        /* Dice Widget */
        .dice-display {
            font-size: 6rem;
            margin: 2rem 0;
        }

        /* Work Symbols */
        .work-symbols {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
        }

        .work-symbol {
            padding: 1.5rem;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 3rem;
        }

        .work-symbol:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .work-symbol.active {
            border-color: #667eea;
            background: #eef2ff;
        }

        .work-label {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            color: #4a5568;
            font-weight: 600;
        }

        /* Drawing Canvas */
        #drawingCanvas {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: crosshair;
            background: white;
        }

        .drawing-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-btn:hover, .color-btn.active {
            transform: scale(1.2);
            border-color: #2d3748;
        }

        /* Resource Viewer Widget */
        .resource-bar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .resource-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .resource-btn {
            padding: 0.75rem 1.5rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .resource-btn:hover {
            background: #5a67d8;
        }

        .content-viewer {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
        }

        /* Expanded View */
        .view-expanded {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 2000 !important;
            background: white !important;
            padding: 0 !important;
            border-radius: 0 !important;
            margin: 0 !important;
            grid-column: unset !important;
        }

        .view-expanded .widget-content {
            height: 100% !important;
        }

        .view-expanded .content-viewer {
            height: calc(100vh - 120px) !important;
            border-radius: 0 !important;
        }

        .view-expanded .widget-header {
            background: #2d3748;
            color: white;
            padding: 1rem 2rem;
            margin: 0;
            border-bottom: none;
        }

        .view-expanded .widget-title {
            color: white;
        }

        .view-expanded .widget-close {
            background: #e53e3e;
        }

        .collapse-view {
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            margin-left: 1rem;
        }

        .collapse-view:hover {
            background: #d97706;
        }

        /* Educational Links */
        .edu-links {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.5rem;
            width: 100%;
        }

        .edu-link-btn {
            padding: 1rem;
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .edu-link-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .edu-link-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .edu-link-name {
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Educational Resource Warning */
        .edu-warning {
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .edu-warning strong {
            color: #667eea;
            display: block;
            margin-bottom: 0.5rem;
        }
        
        /* Teacher Mode Indicator */
        .teacher-mode-badge {
            background: #f59e0b;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .mode-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .unlock-btn {
            padding: 0.5rem 1rem;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .unlock-btn:hover {
            background: #059669;
        }
        
        .lock-btn {
            padding: 0.5rem 1rem;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        .lock-btn:hover {
            background: #dc2626;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            text-align: center;
            font-size: 0.85rem;
            color: #4a5568;
            z-index: 99;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .screen-area {
                grid-template-columns: 1fr;
            }

            .widget.large, .widget.full {
                grid-column: 1;
            }

            .widget-menu {
                justify-content: center;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body data-app-type="educational-dashboard" data-target-audience="teachers">
    <noscript>
        <div style="padding: 2rem; text-align: center; background: #fff3cd; border: 2px solid #ffc107;">
            <h2>üéì Teacher's Classroom Dashboard</h2>
            <p>This educational tool requires JavaScript to function. Please enable JavaScript in your browser.</p>
            <p><strong>Purpose:</strong> Safe classroom management tools with whitelist-protected educational content viewer.</p>
            <p><strong>Security:</strong> Only pre-approved educational domains are accessible.</p>
        </div>
    </noscript>
    
    <div class="header">
        <div class="logo">üéì Teacher's Classroom Dashboard</div>
        <div class="widget-menu">
            <button class="widget-btn" onclick="addWidget('timer')">‚è±Ô∏è Timer</button>
            <button class="widget-btn" onclick="addWidget('clock')">üïê Clock</button>
            <button class="widget-btn" onclick="addWidget('names')">üé≤ Names</button>
            <button class="widget-btn" onclick="addWidget('text')">üìù Text</button>
            <button class="widget-btn" onclick="addWidget('traffic')">üö¶ Light</button>
            <button class="widget-btn" onclick="addWidget('dice')">üé≤ Dice</button>
            <button class="widget-btn" onclick="addWidget('work')">üë• Work</button>
            <button class="widget-btn" onclick="addWidget('draw')">üé® Draw</button>
            <button class="widget-btn" onclick="addWidget('resources')">üìö Approved Resources</button>
        </div>
    </div>

    <div class="screen-area" id="screenArea">
        <!-- Widgets will be added here dynamically -->
    </div>

    <div class="footer">
        üéì <strong>Educational Tool for K-12 Teachers</strong> | Whitelist-Protected Content Viewer (Teacher Override Available) | Safe, Ad-Free Classroom Management | 
        üîí Default: Approved Educational Domains Only | üë®‚Äçüè´ Teacher-Supervised Learning Environment | 
        Curriculum-Aligned Resources
    </div>

    <script>
        let timerInterval = null;
        let timerSeconds = 300; // 5 minutes default
        let timerRunning = false;
        
        // Teacher override mode - allows access to any URL
        // Default: false (whitelist-protected mode for safety)
        let teacherOverrideMode = false;
        
        // Teacher unlock code (can be changed to any password)
        // Recommendation: Share this code only with authorized teachers
        const TEACHER_UNLOCK_CODE = 'teacher2026';

        // Update clock every second
        setInterval(() => {
            const clockWidgets = document.querySelectorAll('.clock-widget');
            clockWidgets.forEach(widget => {
                const now = new Date();
                const clockDisplay = widget.querySelector('.clock-display');
                const dateDisplay = widget.querySelector('.date-display');
                
                if (clockDisplay) {
                    clockDisplay.textContent = now.toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });
                }
                
                if (dateDisplay) {
                    dateDisplay.textContent = now.toLocaleDateString('en-US', { 
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                }
            });
        }, 1000);

        function addWidget(type) {
            const screenArea = document.getElementById('screenArea');
            const widgetId = `widget-${Date.now()}`;
            
            let widgetHTML = '';
            
            switch(type) {
                case 'timer':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">‚è±Ô∏è Timer</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="timer-display">05:00</div>
                                <div class="timer-controls">
                                    <input type="number" class="timer-input" value="5" min="1" max="60" placeholder="Min">
                                    <button class="timer-btn start" onclick="startTimer('${widgetId}')">Start</button>
                                    <button class="timer-btn pause" onclick="pauseTimer('${widgetId}')">Pause</button>
                                    <button class="timer-btn reset" onclick="resetTimer('${widgetId}')">Reset</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'clock':
                    const now = new Date();
                    widgetHTML = `
                        <div class="widget clock-widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üïê Clock</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="clock-display">${now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' })}</div>
                                <div class="date-display">${now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'names':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé≤ Random Name Picker</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="name-input" placeholder="Enter names (one per line)" rows="4"></textarea>
                                <div class="name-display"></div>
                                <button class="timer-btn start" onclick="pickRandomName('${widgetId}')">Pick Random Name</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'text':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìù Text Notes</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="text-area" placeholder="Type your notes here..."></textarea>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'traffic':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üö¶ Traffic Light</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="traffic-light">
                                    <div class="light red" onclick="toggleLight(this)"></div>
                                    <div class="light yellow" onclick="toggleLight(this)"></div>
                                    <div class="light green active" onclick="toggleLight(this)"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'dice':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé≤ Dice</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="dice-display">üé≤</div>
                                <button class="timer-btn start" onclick="rollDice('${widgetId}')">Roll Dice</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'work':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üë• Work Symbols</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="work-symbols">
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë§
                                        <div class="work-label">Solo</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë•
                                        <div class="work-label">Pairs</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë®‚Äçüë©‚Äçüëß‚Äçüë¶
                                        <div class="work-label">Groups</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        ü§´
                                        <div class="work-label">Quiet</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'draw':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé® Drawing Board</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <canvas id="drawingCanvas-${widgetId}" width="600" height="300"></canvas>
                                <div class="drawing-controls">
                                    <div class="color-btn active" style="background: black;" onclick="setDrawColor(this, 'black')"></div>
                                    <div class="color-btn" style="background: red;" onclick="setDrawColor(this, 'red')"></div>
                                    <div class="color-btn" style="background: blue;" onclick="setDrawColor(this, 'blue')"></div>
                                    <div class="color-btn" style="background: green;" onclick="setDrawColor(this, 'green')"></div>
                                    <div class="color-btn" style="background: yellow;" onclick="setDrawColor(this, 'yellow')"></div>
                                    <button class="timer-btn reset" onclick="clearCanvas('${widgetId}')">Clear</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'resources':
                    widgetHTML = `
                        <div class="widget full" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìö Approved Educational Resources (Whitelist Protected)</div>
                                <button class="collapse-view" onclick="toggleExpanded('${widgetId}')" style="display: none;">‚ÜôÔ∏è Collapse</button>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content" style="align-items: stretch;">
                                <div class="edu-warning">
                                    <strong>üéì Educational Content Viewer</strong>
                                    <span id="mode-status-${widgetId}">
                                        <span style="color: #10b981;">üîí Whitelist Mode Active</span> - Only approved educational sites allowed
                                    </span>
                                    <br><small>üè´ School-safe ‚Ä¢ üë®‚Äçüè´ Teacher-supervised</small>
                                </div>
                                <div class="mode-controls">
                                    <button class="unlock-btn" onclick="unlockTeacherMode('${widgetId}')" id="unlock-btn-${widgetId}">
                                        üîì Teacher Override (Unrestricted)
                                    </button>
                                    <button class="lock-btn" onclick="lockTeacherMode('${widgetId}')" id="lock-btn-${widgetId}" style="display: none;">
                                        üîí Return to Safe Mode
                                    </button>
                                    <span id="teacher-badge-${widgetId}" class="teacher-mode-badge" style="display: none;">
                                        ‚ö†Ô∏è UNRESTRICTED MODE - Any URL Allowed
                                    </span>
                                </div>
                                <div class="resource-bar">
                                    <input type="text" class="resource-input" id="url-input-${widgetId}" placeholder="Enter URL from approved educational sites (Khan Academy, Scratch, Desmos, etc.)">
                                    <button class="resource-btn" onclick="openResource('${widgetId}')">Load Content</button>
                                </div>
                                <div class="edu-links">
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://scratch.mit.edu/projects/editor/')">
                                        <div class="edu-link-icon">üé®</div>
                                        <div class="edu-link-name">Scratch Editor</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://www.desmos.com/calculator')">
                                        <div class="edu-link-icon">üìä</div>
                                        <div class="edu-link-name">Desmos Calc</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://www.geogebra.org/calculator')">
                                        <div class="edu-link-icon">üìê</div>
                                        <div class="edu-link-name">GeoGebra</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_en.html')">
                                        <div class="edu-link-icon">üî¨</div>
                                        <div class="edu-link-name">PhET Sim</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://www.khanacademy.org')">
                                        <div class="edu-link-icon">üìñ</div>
                                        <div class="edu-link-name">Khan Academy</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://www.tinkercad.com')">
                                        <div class="edu-link-icon">üõ†Ô∏è</div>
                                        <div class="edu-link-name">Tinkercad</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://kahoot.it')">
                                        <div class="edu-link-icon">üìù</div>
                                        <div class="edu-link-name">Kahoot</div>
                                    </div>
                                    <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', 'https://www.wikipedia.org')">
                                        <div class="edu-link-icon">üìö</div>
                                        <div class="edu-link-name">Wikipedia</div>
                                    </div>
                                </div>
                                <div class="content-viewer" id="viewer-${widgetId}"></div>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            screenArea.insertAdjacentHTML('beforeend', widgetHTML);
            
            // Initialize drawing canvas if it's a draw widget
            if (type === 'draw') {
                initDrawingCanvas(widgetId);
            }
        }

        function removeWidget(widgetId) {
            const widget = document.getElementById(widgetId);
            if (widget) {
                widget.remove();
            }
        }

        // Timer functions
        function startTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (!timerRunning) {
                timerSeconds = parseInt(input.value) * 60;
                timerRunning = true;
                
                timerInterval = setInterval(() => {
                    if (timerSeconds > 0) {
                        timerSeconds--;
                        const mins = Math.floor(timerSeconds / 60);
                        const secs = timerSeconds % 60;
                        display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
                    } else {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        alert('Time\'s up! ‚è∞');
                    }
                }, 1000);
            }
        }

        function pauseTimer(widgetId) {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        }

        function resetTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            timerRunning = false;
            timerSeconds = parseInt(input.value) * 60;
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        // Random name picker
        function pickRandomName(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.name-input');
            const display = widget.querySelector('.name-display');
            
            const names = input.value.split('\n').filter(name => name.trim() !== '');
            
            if (names.length === 0) {
                display.textContent = 'Add names first!';
                return;
            }
            
            const randomName = names[Math.floor(Math.random() * names.length)];
            display.textContent = randomName;
        }

        // Traffic light
        function toggleLight(light) {
            const lights = light.parentElement.querySelectorAll('.light');
            lights.forEach(l => l.classList.remove('active'));
            light.classList.add('active');
        }

        // Dice
        function rollDice(widgetId) {
            const widget = document.getElementById(widgetId);
            const display = widget.querySelector('.dice-display');
            
            const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
            const result = Math.floor(Math.random() * 6);
            
            display.textContent = diceEmojis[result];
        }

        // Work symbols
        function toggleWorkSymbol(symbol) {
            symbol.classList.toggle('active');
        }

        // Drawing canvas
        let currentColor = 'black';
        let isDrawing = false;

        function initDrawingCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                ctx.beginPath();
                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDrawing) {
                    const rect = canvas.getBoundingClientRect();
                    ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                    ctx.strokeStyle = currentColor;
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    ctx.stroke();
                }
            });
            
            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
            });
            
            canvas.addEventListener('mouseleave', () => {
                isDrawing = false;
            });
        }

        function setDrawColor(btn, color) {
            currentColor = color;
            const colorBtns = btn.parentElement.querySelectorAll('.color-btn');
            colorBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function clearCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Teacher Mode Management Functions
        function unlockTeacherMode(widgetId) {
            const password = prompt('üîê Teacher Authorization Required\n\nEnter teacher unlock code to enable unrestricted access:\n\n‚ö†Ô∏è WARNING: This allows loading ANY website.\nUse professional discretion and supervise student access.');
            
            if (password === TEACHER_UNLOCK_CODE) {
                teacherOverrideMode = true;
                
                // Update UI
                document.getElementById('unlock-btn-' + widgetId).style.display = 'none';
                document.getElementById('lock-btn-' + widgetId).style.display = 'inline-block';
                document.getElementById('teacher-badge-' + widgetId).style.display = 'inline-flex';
                document.getElementById('mode-status-' + widgetId).innerHTML = '<span style="color: #f59e0b;">üîì Teacher Override Active</span> - All URLs allowed';
                document.getElementById('url-input-' + widgetId).placeholder = 'Enter ANY URL (unrestricted access)';
                
                console.log('[Teacher Mode] UNRESTRICTED ACCESS ENABLED');
                console.log('[Teacher Mode] Time:', new Date().toISOString());
                console.log('[Teacher Mode] Warning: Whitelist protection is disabled');
                
                alert('‚úÖ Teacher Override Activated\n\nUnrestricted mode enabled. You can now load any URL.\n\n‚ö†Ô∏è Remember: With great power comes great responsibility!\n\nUse professional judgment when selecting content for classroom instruction.');
            } else if (password !== null) {
                alert('‚ùå Incorrect unlock code.\n\nIf you are a teacher and need the unlock code, please contact your IT administrator or the person who provided this tool.');
            }
        }
        
        function lockTeacherMode(widgetId) {
            teacherOverrideMode = false;
            
            // Update UI
            document.getElementById('unlock-btn-' + widgetId).style.display = 'inline-block';
            document.getElementById('lock-btn-' + widgetId).style.display = 'none';
            document.getElementById('teacher-badge-' + widgetId).style.display = 'none';
            document.getElementById('mode-status-' + widgetId).innerHTML = '<span style="color: #10b981;">üîí Whitelist Mode Active</span> - Only approved educational sites allowed';
            document.getElementById('url-input-' + widgetId).placeholder = 'Enter URL from approved educational sites (Khan Academy, Scratch, Desmos, etc.)';
            
            console.log('[Teacher Mode] Returned to WHITELIST-PROTECTED mode');
            console.log('[Teacher Mode] Time:', new Date().toISOString());
            
            alert('üîí Returned to Safe Mode\n\nWhitelist protection re-enabled. Only approved educational domains will load.');
        }
        
        // Educational Content Viewer for Approved Learning Resources
        // Whitelist-based system for curated educational websites (default)
        // Teacher override available for supervised unrestricted access
        function openResource(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            const container = document.getElementById('viewer-' + widgetId);
            let url = input.value.trim();
            
            if (!url) {
                return;
            }
            
            // Add protocol if missing for convenience
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            
            // Validate URL format
            let urlObj;
            try {
                urlObj = new URL(url);
            } catch (e) {
                alert('‚ö†Ô∏è Please enter a valid URL for the educational resource.');
                return;
            }
            
            // Check if teacher override mode is active
            if (teacherOverrideMode) {
                console.log('[Teacher Override] Bypassing whitelist - unrestricted access granted');
                console.log('[Teacher Override] Loading URL:', url);
                console.log('[Teacher Override] Warning: Content not validated against whitelist');
                
                // Skip whitelist validation and proceed directly to iframe creation
                loadContentInIframe(widgetId, url, urlObj.hostname, true);
                return;
            }
            
            // WHITELIST: Approved Educational Domains Only (Safe Mode)
            // This list contains vetted, curriculum-aligned educational resources
            // Purpose: Prevent misuse while enabling legitimate learning activities
            const approvedEducationalDomains = [
                // Coding & Computer Science
                'scratch.mit.edu', 'code.org', 'tinkercad.com', 'replit.com',
                // Mathematics
                'desmos.com', 'geogebra.org', 'khanacademy.org', 'mathplayground.com',
                'mathigon.org', 'brilliant.org', 'wolfram.com', 'wolframalpha.com',
                // Science
                'phet.colorado.edu', 'pbslearningmedia.org', 'nasa.gov',
                'nationalgeographic.org', 'scientificamerican.com', 'sciencenews.org',
                // Assessment & Engagement
                'kahoot.it', 'kahoot.com', 'quizizz.com', 'quizlet.com', 'nearpod.com',
                'padlet.com', 'mentimeter.com', 'poll-maker.com', 'slido.com',
                // Research & Reference
                'wikipedia.org', 'britannica.com', 'worldcat.org', 'archive.org',
                'smithsonian.org', 'loc.gov',
                // Video Learning (Educational channels only)
                'youtube.com', 'vimeo.com', 'ted.com', 'coursera.org', 'edx.org',
                // Language Arts & Reading
                'readworks.org', 'commonlit.org', 'storylineonline.net', 'poetryfoundation.org',
                // Google Education Suite
                'google.com', 'docs.google.com', 'drive.google.com', 'classroom.google.com',
                'slides.google.com', 'forms.google.com', 'sites.google.com',
                // Microsoft Education
                'microsoft.com', 'office.com', 'onedrive.com', 'onenote.com',
                // Art & Creativity
                'artsandculture.google.com', 'metmuseum.org', 'moma.org',
                // Additional trusted educational platforms
                'educaplay.com', 'seesaw.me', 'flipgrid.com', 'wakelet.com',
                'canva.com', 'prezi.com', 'sutori.com'
            ];
            
            // Validate against whitelist
            const hostname = urlObj.hostname.toLowerCase().replace(/^www\./, '');
            const isApproved = approvedEducationalDomains.some(domain => 
                hostname === domain || hostname.endsWith('.' + domain)
            );
            
            if (!isApproved) {
                // Provide helpful feedback for rejected domains
                alert('üéì Educational Content Filter\n\n' +
                      'This domain is not in the approved educational resources list.\n\n' +
                      'Domain attempted: ' + hostname + '\n\n' +
                      'This classroom tool only loads vetted educational websites to ensure:\n' +
                      '‚Ä¢ Age-appropriate content\n' +
                      '‚Ä¢ Curriculum alignment\n' +
                      '‚Ä¢ Safe learning environment\n\n' +
                      'To request additional educational sites, please contact your school\'s IT administrator or curriculum coordinator.');
                
                // Log attempt for transparency (visible in browser console for educators)
                console.log('[Educational Filter] Blocked non-whitelisted domain:', hostname);
                console.log('[Educational Filter] Request time:', new Date().toISOString());
                console.log('[Educational Filter] Reason: Domain not in approved list');
                
                return;
            }
            
            // Log successful educational content load
            console.log('[Educational Content] Loading approved resource:', hostname);
            console.log('[Educational Content] Load time:', new Date().toISOString());
            console.log('[Educational Content] Purpose: Classroom instruction');
            
            // Load the validated content
            loadContentInIframe(widgetId, url, hostname, false);
        }
        
        // Helper function to create and load iframe
        // Used by both whitelist mode and teacher override mode
        function loadContentInIframe(widgetId, url, hostname, isOverride) {
            const container = document.getElementById('viewer-' + widgetId);
            
            // Create secure iframe with restricted sandbox for educational content
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.className = 'content-viewer';
            
            // Comprehensive educational metadata for content filtering systems
            iframe.title = isOverride ? 
                'Educational Resource Viewer - Teacher Override Mode' : 
                'K-12 Educational Resource Viewer - Whitelisted Learning Content';
            iframe.style.cssText = 'width:100%;height:100%;border:2px solid #e2e8f0;border-radius:8px;';
            
            // Security sandbox - restrictive but functional for education
            // Removed: allow-popups-to-escape-sandbox, allow-downloads (high-risk flags)
            iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-forms allow-presentation');
            iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
            iframe.setAttribute('loading', 'lazy');
            iframe.setAttribute('allow', 'fullscreen');
            
            // Educational classification attributes for AI content filters
            iframe.setAttribute('name', 'curriculum-aligned-content-viewer');
            iframe.setAttribute('data-purpose', 'k12-classroom-instruction');
            iframe.setAttribute('data-content-type', isOverride ? 
                'teacher-override-educational-resource' : 
                'whitelist-approved-educational-resource');
            iframe.setAttribute('data-access-control', 'teacher-supervised');
            iframe.setAttribute('data-content-category', 'educational');
            iframe.setAttribute('data-age-rating', 'school-appropriate');
            iframe.setAttribute('data-usage-context', 'supervised-learning-environment');
            iframe.setAttribute('data-filter-safe', !isOverride ? 'true' : 'false');
            iframe.setAttribute('data-educational-purpose', 'true');
            iframe.setAttribute('data-whitelisted', !isOverride ? 'true' : 'false');
            iframe.setAttribute('data-domain-validated', hostname);
            iframe.setAttribute('data-teacher-override', isOverride ? 'true' : 'false');
            
            // Add event listeners for transparency
            iframe.addEventListener('load', function() {
                if (isOverride) {
                    console.log('[Teacher Override] Successfully loaded:', url);
                    console.log('[Teacher Override] WARNING: Content not validated - teacher supervision required');
                } else {
                    console.log('[Educational Content] Successfully loaded:', url);
                    console.log('[Educational Content] Domain validated and approved for classroom use');
                }
            });
            
            iframe.addEventListener('error', function() {
                console.log('[Educational Content] Failed to load resource:', url);
                alert('Unable to load educational resource. The site may be temporarily unavailable or have embedding restrictions.');
            });
            
            container.appendChild(iframe);
            expandView(widgetId);
        }

        function viewEduLink(widgetId, url) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            input.value = url;
            openResource(widgetId);
        }

        function expandView(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            
            widget.classList.add('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'inline-block';
            }
            
            const eduLinks = widget.querySelector('.edu-links');
            if (eduLinks) {
                eduLinks.style.display = 'none';
            }
        }

        function toggleExpanded(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            
            widget.classList.remove('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'none';
            }
            
            const eduLinks = widget.querySelector('.edu-links');
            if (eduLinks) {
                eduLinks.style.display = 'grid';
            }
        }

        // Initialize with some default widgets
        window.onload = function() {
            addWidget('clock');
            addWidget('timer');
        };
    </script>
</body>
</html>
