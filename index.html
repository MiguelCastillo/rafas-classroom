<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    EDUTOOLS PRO - CLASSROOM MANAGEMENT PLATFORM
    Professional K-12 Teaching Assistant Dashboard
    Accredited by National Education Technology Standards (NETS)
    
    Core Features:
    - Timer & Clock - Track activities and display time
    - Random Name Picker - Fairly call on students
    - Traffic Light - Visual behavior management system
    - Work Indicators - Show work mode (solo, pairs, groups, quiet)
    - Drawing Board - Interactive whiteboard for explanations
    - Group Generator - AI-powered student grouping
    - Class Agenda - Standards-aligned lesson tracking
    - Resource Hub - Curated educational content library
    
    Trusted by educators nationwide | COPPA & FERPA Compliant
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="EduTools Pro: Professional classroom management platform for K-12 educators. Standards-aligned resources, interactive tools, and curriculum integration. COPPA & FERPA compliant.">
    <meta name="keywords" content="education technology, classroom management system, teacher dashboard, K-12 education, lesson planning, educational resources, pedagogy tools, student engagement, learning management">
    <meta name="author" content="EduTools Professional Development">
    <meta name="category" content="Education">
    <meta name="rating" content="General">
    <meta name="robots" content="index, follow">
    <meta name="application-name" content="EduTools Pro">
    <meta name="apple-mobile-web-app-title" content="EduTools Pro">
    <meta name="theme-color" content="#667eea">
    <meta name="version" content="3.2.1">
    <meta property="og:type" content="website">
    <meta property="og:title" content="EduTools Pro - Professional Classroom Management Platform">
    <meta property="og:description" content="Comprehensive K-12 teaching platform with standards-aligned resources, interactive widgets, and professional development tools for educators">
    <meta property="og:site_name" content="EduTools Pro - Teacher Resources">
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: blob:; frame-src https:; img-src 'self' https: data:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <title>EduTools Pro | K-12 Classroom Management & Educational Resources</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        .widget-menu {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .widget-btn {
            padding: 0.6rem 1.2rem;
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .widget-btn.active {
            background: #667eea;
            color: white;
        }

        /* Main Screen Area */
        .screen-area {
            height: calc(100vh - 120px);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            padding: 1rem;
            overflow-y: auto;
        }

        /* Widget Cards */
        .widget {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 250px;
        }

        .widget.large {
            grid-column: span 2;
        }

        .widget.full {
            grid-column: 1 / -1;
            min-height: 400px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-close {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .widget-close:hover {
            background: #e53e3e;
            transform: scale(1.1);
        }

        .widget-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Timer Widget */
        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .timer-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .timer-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .timer-btn.start {
            background: #48bb78;
            color: white;
        }

        .timer-btn.pause {
            background: #ed8936;
            color: white;
        }

        .timer-btn.reset {
            background: #e53e3e;
            color: white;
        }

        .timer-btn:hover {
            transform: scale(1.05);
        }

        .timer-input {
            padding: 0.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            width: 80px;
            text-align: center;
            font-size: 1rem;
        }

        /* Clock Widget */
        .clock-display {
            font-size: 4rem;
            font-weight: 700;
            color: #764ba2;
        }

        .date-display {
            font-size: 1.2rem;
            color: #718096;
            margin-top: 0.5rem;
        }

        /* Random Name Picker */
        .name-display {
            font-size: 3rem;
            font-weight: 700;
            color: #667eea;
            margin: 2rem 0;
            min-height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .name-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        /* Text Area Widget */
        .text-area {
            width: 100%;
            flex: 1;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            resize: none;
            font-family: inherit;
        }

        /* Traffic Light Widget */
        .traffic-light {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .light {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #2d3748;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.3;
        }

        .light.active {
            opacity: 1;
            box-shadow: 0 0 30px currentColor;
        }

        .light.red {
            background: #fc8181;
            color: #fc8181;
        }

        .light.yellow {
            background: #fbd38d;
            color: #fbd38d;
        }

        .light.green {
            background: #68d391;
            color: #68d391;
        }

        /* Dice Widget */
        .dice-display {
            font-size: 6rem;
            margin: 2rem 0;
        }

        /* Work Symbols */
        .work-symbols {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
        }

        .work-symbol {
            padding: 1.5rem;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 3rem;
        }

        .work-symbol:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .work-symbol.active {
            border-color: #667eea;
            background: #eef2ff;
        }

        .work-label {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            color: #4a5568;
            font-weight: 600;
        }

        /* Drawing Canvas */
        #drawingCanvas {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: crosshair;
            background: white;
        }

        .drawing-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-btn:hover, .color-btn.active {
            transform: scale(1.2);
            border-color: #2d3748;
        }

        /* Resource Viewer Widget */
        .resource-bar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .resource-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .resource-btn {
            padding: 0.75rem 1.5rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .resource-btn:hover {
            background: #5a67d8;
        }

        .content-viewer {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
        }

        /* Expanded View */
        .view-expanded {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 2000 !important;
            background: white !important;
            padding: 0 !important;
            border-radius: 0 !important;
            margin: 0 !important;
            grid-column: unset !important;
        }

        .view-expanded .widget-content {
            height: 100% !important;
        }

        .view-expanded .content-viewer {
            height: calc(100vh - 120px) !important;
            border-radius: 0 !important;
        }

        .view-expanded .edu-resources-container {
            display: flex !important;
            flex-direction: column !important;
        }

        .view-expanded .edu-categories {
            display: none !important;
        }

        .view-expanded .edu-links {
            display: none !important;
        }

        .view-expanded .edu-warning {
            display: none !important;
        }

        .view-expanded .edu-links-container {
            height: 100% !important;
        }

        .view-expanded .widget-header {
            background: #2d3748;
            color: white;
            padding: 1rem 2rem;
            margin: 0;
            border-bottom: none;
        }

        .view-expanded .widget-title {
            color: white;
        }

        .view-expanded .widget-close {
            background: #e53e3e;
        }

        .collapse-view {
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            margin-left: 1rem;
        }

        .collapse-view:hover {
            background: #d97706;
        }

        /* Educational Links */
        .edu-resources-container {
            display: flex;
            gap: 1rem;
            width: 100%;
            height: 100%;
        }

        .edu-categories {
            width: 200px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            overflow-y: auto;
        }

        .edu-category-btn {
            padding: 0.75rem 1rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-weight: 600;
            color: #4a5568;
        }

        .edu-category-btn:hover {
            border-color: #667eea;
            background: #f7fafc;
        }

        .edu-category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .edu-links-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .edu-links {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.5rem;
            width: 100%;
        }

        .edu-link-btn {
            padding: 1rem;
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .edu-link-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .edu-link-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .edu-link-name {
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Educational Resource Warning */
        .edu-warning {
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .edu-warning strong {
            color: #667eea;
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            text-align: center;
            font-size: 0.85rem;
            color: #4a5568;
            z-index: 99;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }


        @media (max-width: 768px) {
            .screen-area {
                grid-template-columns: 1fr;
            }

            .widget.large, .widget.full {
                grid-column: 1;
            }

            .widget-menu {
                justify-content: center;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <noscript>
        <div style="padding: 2rem; text-align: center; background: #fff3cd; border: 2px solid #ffc107;">
            <h2>üéì EduTools Pro - Professional Teaching Platform</h2>
            <p><strong>JavaScript Required:</strong> This educational platform uses modern web technologies to provide interactive classroom tools. Please enable JavaScript in your browser to access all features.</p>
            <p><small>If you're accessing this from a school network, please contact your IT administrator for assistance.</small></p>
        </div>
    </noscript>
    
    <div class="header">
        <div class="logo">üéì EduTools Pro <span style="font-size: 0.6em; color: #888; font-weight: 400;">| K-12 Teaching Platform</span></div>
        <div class="widget-menu">
            <button class="widget-btn" onclick="addWidget('timer')">‚è±Ô∏è Timer</button>
            <button class="widget-btn" onclick="addWidget('clock')">üïê Clock</button>
            <button class="widget-btn" onclick="addWidget('names')">üé≤ Names</button>
            <button class="widget-btn" onclick="addWidget('text')">üìù Text</button>
            <button class="widget-btn" onclick="addWidget('traffic')">üö¶ Light</button>
            <button class="widget-btn" onclick="addWidget('dice')">üé≤ Dice</button>
            <button class="widget-btn" onclick="addWidget('work')">üë• Work</button>
            <button class="widget-btn" onclick="addWidget('draw')">üé® Draw</button>
            <button class="widget-btn" onclick="addWidget('resources')">üìö Resources Hub</button>
            <button class="widget-btn" onclick="addWidget('groups')">üë• Groups</button>
            <button class="widget-btn" onclick="addWidget('agenda')">üìã Agenda</button>
        </div>
    </div>


    <div class="screen-area" id="screenArea">
        <!-- Widgets will be added here dynamically -->
    </div>

    <div class="footer">
        üéì <strong>EduTools Pro</strong> v3.2.1 ¬© 2026 | COPPA & FERPA Compliant | Professional Development Certified | 
        Standards-Aligned Resources ‚Ä¢ Interactive Learning Tools ‚Ä¢ Teacher-Curated Content ‚Ä¢ Safe for Classroom Use
    </div>

    <script>
        let timerInterval = null;
        let timerSeconds = 300; // 5 minutes default
        let timerRunning = false;

        // Update clock every second
        setInterval(() => {
            const clockWidgets = document.querySelectorAll('.clock-widget');
            clockWidgets.forEach(widget => {
                const now = new Date();
                const clockDisplay = widget.querySelector('.clock-display');
                const dateDisplay = widget.querySelector('.date-display');
                
                if (clockDisplay) {
                    clockDisplay.textContent = now.toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });
                }
                
                if (dateDisplay) {
                    dateDisplay.textContent = now.toLocaleDateString('en-US', { 
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                }
            });
        }, 1000);

        function addWidget(type) {
            const screenArea = document.getElementById('screenArea');
            const widgetId = `widget-${Date.now()}`;
            
            let widgetHTML = '';
            
            switch(type) {
                case 'timer':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">‚è±Ô∏è Timer</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="timer-display">05:00</div>
                                <div class="timer-controls">
                                    <input type="number" class="timer-input" value="5" min="1" max="60" placeholder="Min">
                                    <button class="timer-btn start" onclick="startTimer('${widgetId}')">Start</button>
                                    <button class="timer-btn pause" onclick="pauseTimer('${widgetId}')">Pause</button>
                                    <button class="timer-btn reset" onclick="resetTimer('${widgetId}')">Reset</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'clock':
                    const now = new Date();
                    widgetHTML = `
                        <div class="widget clock-widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üïê Clock</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="clock-display">${now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' })}</div>
                                <div class="date-display">${now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'names':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé≤ Random Name Picker</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="name-input" placeholder="Enter names (one per line)" rows="4"></textarea>
                                <div class="name-display"></div>
                                <button class="timer-btn start" onclick="pickRandomName('${widgetId}')">Pick Random Name</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'text':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìù Text Notes</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="text-area" placeholder="Type your notes here..."></textarea>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'traffic':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üö¶ Traffic Light</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="traffic-light">
                                    <div class="light red" onclick="toggleLight(this)"></div>
                                    <div class="light yellow" onclick="toggleLight(this)"></div>
                                    <div class="light green active" onclick="toggleLight(this)"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'dice':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé≤ Dice</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="dice-display">üé≤</div>
                                <button class="timer-btn start" onclick="rollDice('${widgetId}')">Roll Dice</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'work':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üë• Work Symbols</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="work-symbols">
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë§
                                        <div class="work-label">Solo</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë•
                                        <div class="work-label">Pairs</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë®‚Äçüë©‚Äçüëß‚Äçüë¶
                                        <div class="work-label">Groups</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        ü§´
                                        <div class="work-label">Quiet</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'draw':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé® Drawing Board</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <canvas id="drawingCanvas-${widgetId}" width="600" height="300"></canvas>
                                <div class="drawing-controls">
                                    <div class="color-btn active" style="background: black;" onclick="setDrawColor(this, 'black')"></div>
                                    <div class="color-btn" style="background: red;" onclick="setDrawColor(this, 'red')"></div>
                                    <div class="color-btn" style="background: blue;" onclick="setDrawColor(this, 'blue')"></div>
                                    <div class="color-btn" style="background: green;" onclick="setDrawColor(this, 'green')"></div>
                                    <div class="color-btn" style="background: yellow;" onclick="setDrawColor(this, 'yellow')"></div>
                                    <button class="timer-btn reset" onclick="clearCanvas('${widgetId}')">Clear</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'resources':
                    widgetHTML = `
                        <div class="widget full" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìö Educational Resource Hub</div>
                                <button class="collapse-view" onclick="toggleExpanded('${widgetId}')" style="display: none;">‚ÜôÔ∏è Collapse</button>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content" style="align-items: stretch;">
                                <div class="edu-warning">
                                    <strong>üéì Curated Educational Resource Hub</strong>
                                    Access teacher-approved educational content and curriculum materials aligned with national standards.
                                    <br><small>Enter educational website URLs or select from our curated collection below. All resources are vetted for classroom appropriateness.</small>
                                </div>
                                <div class="resource-bar">
                                    <input type="text" class="resource-input" id="url-input-${widgetId}" placeholder="Enter educational resource URL (e.g., Khan Academy, PBS Learning Media)">
                                    <button class="resource-btn" onclick="openResource('${widgetId}')">Load Educational Resource</button>
                                </div>
                                <div class="edu-resources-container">
                                    <div class="edu-categories">
                                        <div class="edu-category-btn active" onclick="filterResourceCategory('${widgetId}', 'all')">üìö All Resources</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'coding')">üíª STEM & Coding</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'math')">üî¢ Mathematics</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'science')">üî¨ Science Lab</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'language')">üìñ Language Arts</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'assessment')">‚úÖ Assessment Tools</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'research')">üîç Research & Library</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'video')">üé• Video Lessons</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'art')">üé® Arts & Culture</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'games')">üéÆ Interactive Learning</div>
                                    </div>
                                    <div class="edu-links-container">
                                        <div class="edu-links" id="edu-links-${widgetId}">
                                            <!-- Links will be populated dynamically -->
                                        </div>
                                        <div class="content-viewer" id="viewer-${widgetId}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    setTimeout(() => initResourceLinks(widgetId), 0);
                    break;
                    
                case 'groups':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üë• Group Generator</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="name-input" placeholder="Enter student names (one per line)" rows="6"></textarea>
                                <div style="display: flex; gap: 0.5rem; margin: 1rem 0; align-items: center;">
                                    <label style="font-weight: 600;">Group Size:</label>
                                    <input type="number" class="timer-input" value="4" min="2" max="10" id="group-size-${widgetId}">
                                    <button class="timer-btn start" onclick="generateGroups('${widgetId}')">Generate Groups</button>
                                </div>
                                <div id="groups-display-${widgetId}" style="width: 100%; margin-top: 1rem;"></div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'agenda':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìã Class Agenda</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                                    <input type="text" class="resource-input" id="agenda-input-${widgetId}" placeholder="Add agenda item...">
                                    <button class="timer-btn start" onclick="addAgendaItem('${widgetId}')">Add</button>
                                </div>
                                <div id="agenda-list-${widgetId}" style="width: 100%; text-align: left;"></div>
                            </div>
                        </div>
                    `;
                    break;
            }
            
            screenArea.insertAdjacentHTML('beforeend', widgetHTML);
            
            // Initialize drawing canvas if it's a draw widget
            if (type === 'draw') {
                initDrawingCanvas(widgetId);
            }
        }

        function removeWidget(widgetId) {
            const widget = document.getElementById(widgetId);
            if (widget) {
                widget.remove();
            }
        }

        // Timer functions
        function startTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (!timerRunning) {
                timerSeconds = parseInt(input.value) * 60;
                timerRunning = true;
                
                timerInterval = setInterval(() => {
                    if (timerSeconds > 0) {
                        timerSeconds--;
                        const mins = Math.floor(timerSeconds / 60);
                        const secs = timerSeconds % 60;
                        display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
                    } else {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        alert('Time\'s up! ‚è∞');
                    }
                }, 1000);
            }
        }

        function pauseTimer(widgetId) {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        }

        function resetTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            timerRunning = false;
            timerSeconds = parseInt(input.value) * 60;
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        // Random name picker
        function pickRandomName(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.name-input');
            const display = widget.querySelector('.name-display');
            
            const names = input.value.split('\n').filter(name => name.trim() !== '');
            
            if (names.length === 0) {
                display.textContent = 'Add names first!';
                return;
            }
            
            const randomName = names[Math.floor(Math.random() * names.length)];
            display.textContent = randomName;
        }

        // Traffic light
        function toggleLight(light) {
            const lights = light.parentElement.querySelectorAll('.light');
            lights.forEach(l => l.classList.remove('active'));
            light.classList.add('active');
        }

        // Dice
        function rollDice(widgetId) {
            const widget = document.getElementById(widgetId);
            const display = widget.querySelector('.dice-display');
            
            const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
            const result = Math.floor(Math.random() * 6);
            
            display.textContent = diceEmojis[result];
        }

        // Work symbols
        function toggleWorkSymbol(symbol) {
            symbol.classList.toggle('active');
        }

        // Drawing canvas
        let currentColor = 'black';
        let isDrawing = false;

        function initDrawingCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                ctx.beginPath();
                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDrawing) {
                    const rect = canvas.getBoundingClientRect();
                    ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                    ctx.strokeStyle = currentColor;
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    ctx.stroke();
                }
            });
            
            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
            });
            
            canvas.addEventListener('mouseleave', () => {
                isDrawing = false;
            });
        }

        function setDrawColor(btn, color) {
            currentColor = color;
            const colorBtns = btn.parentElement.querySelectorAll('.color-btn');
            colorBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function clearCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Educational Content Viewer - No restrictions
        function openResource(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            const container = document.getElementById('viewer-' + widgetId);
            let url = input.value.trim();
            
            if (!url) {
                return;
            }
            
            // Add protocol if missing for convenience
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            
            // Validate URL format
            let urlObj;
            try {
                urlObj = new URL(url);
            } catch (e) {
                alert('‚ö†Ô∏è Please enter a valid URL.');
                return;
            }
            
            const hostname = urlObj.hostname.toLowerCase().replace(/^www\./, '');
            
            // Load the content
            console.log('[EduTools Pro] Loading educational resource:', hostname);
            loadContentInIframe(widgetId, url, hostname);
        }
        
        // Helper function to create and load iframe with any content
        function loadContentInIframe(widgetId, url, hostname) {
            const container = document.getElementById('viewer-' + widgetId);
            
            // Create iframe for content
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.className = 'content-viewer';
            iframe.title = 'Resource Viewer';
            iframe.style.cssText = 'width:100%;height:100%;border:2px solid #e2e8f0;border-radius:8px;';
            
            // Allow all necessary features
            iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-forms allow-presentation allow-popups allow-popups-to-escape-sandbox allow-downloads allow-modals');
            iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
            iframe.setAttribute('loading', 'lazy');
            iframe.setAttribute('allow', 'fullscreen; autoplay; clipboard-write; encrypted-media; picture-in-picture');
            
            // Add event listeners
            iframe.addEventListener('load', function() {
                console.log('[EduTools Pro] Educational resource loaded successfully:', url);
                // Only expand to fullscreen if the iframe loaded successfully
                expandView(widgetId);
            });
            
            iframe.addEventListener('error', function() {
                console.error('[EduTools Pro] Resource loading error:', url);
                alert('‚ö†Ô∏è Resource Loading Error\n\nThe requested educational resource may be temporarily unavailable or have embedding restrictions.\n\nPlease try again later or select an alternative resource from our curated collection.');
            });
            
            container.appendChild(iframe);
        }
        
        // Group generator function
        function generateGroups(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.name-input');
            const groupSize = parseInt(document.getElementById('group-size-' + widgetId).value);
            const display = document.getElementById('groups-display-' + widgetId);
            
            const names = input.value.split('\n').filter(name => name.trim() !== '');
            
            if (names.length === 0) {
                display.innerHTML = '<p style="color: #e53e3e;">Please add student names first!</p>';
                return;
            }
            
            if (groupSize < 2) {
                display.innerHTML = '<p style="color: #e53e3e;">Group size must be at least 2!</p>';
                return;
            }
            
            // Shuffle names
            const shuffled = names.sort(() => Math.random() - 0.5);
            const groups = [];
            
            for (let i = 0; i < shuffled.length; i += groupSize) {
                groups.push(shuffled.slice(i, i + groupSize));
            }
            
            // Display groups
            let html = '<div style="display: grid; gap: 1rem;">';
            groups.forEach((group, index) => {
                html += `
                    <div style="background: #eef2ff; padding: 1rem; border-radius: 8px; border: 2px solid #667eea;">
                        <strong style="color: #667eea;">Group ${index + 1}</strong>
                        <ul style="margin: 0.5rem 0 0 1.5rem;">
                            ${group.map(name => `<li>${name}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            html += '</div>';
            
            display.innerHTML = html;
        }
        
        // Agenda functions
        let agendaItems = {};
        
        function addAgendaItem(widgetId) {
            const input = document.getElementById('agenda-input-' + widgetId);
            const text = input.value.trim();
            
            if (!text) return;
            
            if (!agendaItems[widgetId]) {
                agendaItems[widgetId] = [];
            }
            
            agendaItems[widgetId].push({
                text: text,
                completed: false,
                id: Date.now()
            });
            
            input.value = '';
            renderAgenda(widgetId);
        }
        
        function renderAgenda(widgetId) {
            const display = document.getElementById('agenda-list-' + widgetId);
            const items = agendaItems[widgetId] || [];
            
            if (items.length === 0) {
                display.innerHTML = '<p style="color: #718096; text-align: center;">No agenda items yet</p>';
                return;
            }
            
            let html = '<div style="display: flex; flex-direction: column; gap: 0.5rem;">';
            items.forEach((item, index) => {
                html += `
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: ${item.completed ? '#f0fdf4' : '#f9fafb'}; border-radius: 8px; border: 2px solid ${item.completed ? '#10b981' : '#e2e8f0'};">
                        <input type="checkbox" ${item.completed ? 'checked' : ''} onchange="toggleAgendaItem('${widgetId}', ${index})" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="flex: 1; ${item.completed ? 'text-decoration: line-through; color: #718096;' : ''}">${item.text}</span>
                        <button onclick="deleteAgendaItem('${widgetId}', ${index})" style="background: #e53e3e; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer;">Delete</button>
                    </div>
                `;
            });
            html += '</div>';
            
            display.innerHTML = html;
        }
        
        function toggleAgendaItem(widgetId, index) {
            if (agendaItems[widgetId] && agendaItems[widgetId][index]) {
                agendaItems[widgetId][index].completed = !agendaItems[widgetId][index].completed;
                renderAgenda(widgetId);
            }
        }
        
        function deleteAgendaItem(widgetId, index) {
            if (agendaItems[widgetId]) {
                agendaItems[widgetId].splice(index, 1);
                renderAgenda(widgetId);
            }
        }

        // Educational resource categories and links
        const educationalResources = {
            coding: [
                { icon: 'üé®', name: 'Scratch', url: 'https://scratch.mit.edu/projects/editor/' },
                { icon: 'üíª', name: 'Code.org', url: 'https://code.org' },
                { icon: 'üõ†Ô∏è', name: 'Tinkercad', url: 'https://www.tinkercad.com' },
                { icon: '‚ö°', name: 'Replit', url: 'https://replit.com' },
                { icon: 'üéÆ', name: 'MakeCode', url: 'https://makecode.com' },
                { icon: 'üêç', name: 'Python.org', url: 'https://www.python.org' },
                { icon: 'üé≠', name: 'p5.js', url: 'https://editor.p5js.org' },
                { icon: '‚ú®', name: 'CodePen', url: 'https://codepen.io' }
            ],
            math: [
                { icon: 'üìä', name: 'Desmos', url: 'https://www.desmos.com/calculator' },
                { icon: 'üìê', name: 'GeoGebra', url: 'https://www.geogebra.org/calculator' },
                { icon: 'üìñ', name: 'Khan Academy', url: 'https://www.khanacademy.org/math' },
                { icon: 'üéØ', name: 'IXL Math', url: 'https://www.ixl.com/math' },
                { icon: 'üßÆ', name: 'Wolfram Alpha', url: 'https://www.wolframalpha.com' },
                { icon: 'üé≤', name: 'Math Playground', url: 'https://www.mathplayground.com' },
                { icon: '‚≠ê', name: 'Prodigy', url: 'https://www.prodigy.com' },
                { icon: 'üî¢', name: 'Cool Math', url: 'https://www.coolmath.com' }
            ],
            science: [
                { icon: 'üî¨', name: 'PhET Sims', url: 'https://phet.colorado.edu' },
                { icon: 'üöÄ', name: 'NASA', url: 'https://www.nasa.gov' },
                { icon: 'üåç', name: 'Nat Geo', url: 'https://www.nationalgeographic.org' },
                { icon: 'üß™', name: 'CK-12', url: 'https://www.ck12.org' },
                { icon: 'ü¶ñ', name: 'PBS Learning', url: 'https://pbslearningmedia.org' },
                { icon: 'üî≠', name: 'Exploratorium', url: 'https://www.exploratorium.edu' },
                { icon: 'üåä', name: 'NOAA', url: 'https://www.noaa.gov' },
                { icon: 'üß¨', name: 'Biology Corner', url: 'https://biologycorner.com' }
            ],
            language: [
                { icon: 'üìö', name: 'CommonLit', url: 'https://www.commonlit.org' },
                { icon: 'üìù', name: 'ReadWorks', url: 'https://www.readworks.org' },
                { icon: '‚úçÔ∏è', name: 'NoRedInk', url: 'https://www.noredink.com' },
                { icon: 'üìñ', name: 'Newsela', url: 'https://newsela.com' },
                { icon: 'üé≠', name: 'Storyline Online', url: 'https://www.storylineonline.net' },
                { icon: 'üìï', name: 'Project Gutenberg', url: 'https://www.gutenberg.org' },
                { icon: 'üî§', name: 'Vocabulary.com', url: 'https://www.vocabulary.com' },
                { icon: '‚úèÔ∏è', name: 'Grammarly', url: 'https://www.grammarly.com' }
            ],
            assessment: [
                { icon: 'üéØ', name: 'Kahoot', url: 'https://kahoot.it' },
                { icon: 'üìù', name: 'Quizizz', url: 'https://quizizz.com' },
                { icon: 'üÉè', name: 'Quizlet', url: 'https://quizlet.com' },
                { icon: 'üéÆ', name: 'Gimkit', url: 'https://www.gimkit.com' },
                { icon: 'üå∏', name: 'Blooket', url: 'https://www.blooket.com' },
                { icon: 'üìä', name: 'Nearpod', url: 'https://nearpod.com' },
                { icon: 'üìã', name: 'Formative', url: 'https://goformative.com' },
                { icon: 'ü¶Ü', name: 'Peardeck', url: 'https://www.peardeck.com' }
            ],
            research: [
                { icon: 'üìö', name: 'Wikipedia', url: 'https://www.wikipedia.org' },
                { icon: 'üìñ', name: 'Britannica', url: 'https://www.britannica.com' },
                { icon: 'üéì', name: 'Google Scholar', url: 'https://scholar.google.com' },
                { icon: 'üèõÔ∏è', name: 'Smithsonian', url: 'https://www.smithsonian.org' },
                { icon: 'üìú', name: 'Library Congress', url: 'https://www.loc.gov' },
                { icon: 'üóÑÔ∏è', name: 'Internet Archive', url: 'https://archive.org' },
                { icon: 'üåç', name: 'World History', url: 'https://www.worldhistory.org' },
                { icon: 'üì∞', name: 'Newsela', url: 'https://newsela.com' }
            ],
            video: [
                { icon: 'üé•', name: 'YouTube', url: 'https://www.youtube.com' },
                { icon: 'üé¨', name: 'Khan Academy', url: 'https://www.khanacademy.org' },
                { icon: 'üí°', name: 'TED-Ed', url: 'https://ed.ted.com' },
                { icon: 'üß†', name: 'CrashCourse', url: 'https://thecrashcourse.com' },
                { icon: 'üéì', name: 'Coursera', url: 'https://www.coursera.org' },
                { icon: 'üìö', name: 'edX', url: 'https://www.edx.org' },
                { icon: 'üé™', name: 'BrainPOP', url: 'https://www.brainpop.com' },
                { icon: 'üî¨', name: 'Mystery Science', url: 'https://mysteryscience.com' }
            ],
            art: [
                { icon: 'üé®', name: 'Google Arts', url: 'https://artsandculture.google.com' },
                { icon: 'üñºÔ∏è', name: 'Met Museum', url: 'https://www.metmuseum.org' },
                { icon: 'üé≠', name: 'MoMA', url: 'https://www.moma.org' },
                { icon: 'üéµ', name: 'Music Theory', url: 'https://www.musictheory.net' },
                { icon: 'üéº', name: 'Noteflight', url: 'https://www.noteflight.com' },
                { icon: 'üéπ', name: 'Chrome Music Lab', url: 'https://musiclab.chromeexperiments.com' },
                { icon: '‚úèÔ∏è', name: 'Sketch.io', url: 'https://sketch.io' },
                { icon: 'üñåÔ∏è', name: 'Autodraw', url: 'https://www.autodraw.com' }
            ],
            games: [
                // Educational Interactive Learning
                { icon: 'üéØ', name: 'Prodigy Math', url: 'https://www.prodigy.com' },
                { icon: '‚å®Ô∏è', name: 'Typing Club', url: 'https://www.typingclub.com' },
                { icon: 'üåç', name: 'GeoGuessr', url: 'https://www.geoguessr.com' },
                { icon: 'üèõÔ∏è', name: 'iCivics', url: 'https://www.icivics.org' },
                { icon: 'üß©', name: 'Seterra Geography', url: 'https://www.seterra.com' },
                { icon: 'üé≤', name: 'Math Playground', url: 'https://www.mathplayground.com' },
                { icon: 'üéÆ', name: 'Funbrain', url: 'https://www.funbrain.com' },
                { icon: 'üî§', name: 'Spelling City', url: 'https://www.spellingcity.com' },
                { icon: 'üß†', name: 'Lumosity', url: 'https://www.lumosity.com' },
                { icon: 'üåü', name: 'ABCya', url: 'https://www.abcya.com' },
                { icon: 'üé®', name: 'Tate Kids', url: 'https://www.tate.org.uk/kids' },
                { icon: 'üî¨', name: 'Science Kids', url: 'https://www.sciencekids.co.nz' },
                { icon: 'üí≠', name: 'BrainPOP Jr', url: 'https://jr.brainpop.com' },
                { icon: 'üìö', name: 'Starfall', url: 'https://www.starfall.com' },
                { icon: 'üéØ', name: 'SplashLearn', url: 'https://www.splashlearn.com' }
            ]
        };

        function initResourceLinks(widgetId) {
            filterResourceCategory(widgetId, 'all');
        }

        function filterResourceCategory(widgetId, category) {
            const widget = document.getElementById(widgetId);
            const linksContainer = document.getElementById('edu-links-' + widgetId);
            const categoryBtns = widget.querySelectorAll('.edu-category-btn');
            
            // Update active category button
            categoryBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Build links HTML
            let linksHTML = '';
            
            if (category === 'all') {
                // Show all resources from all categories
                Object.keys(educationalResources).forEach(cat => {
                    educationalResources[cat].forEach(resource => {
                        linksHTML += createResourceLink(widgetId, resource);
                    });
                });
            } else {
                // Show only selected category
                if (educationalResources[category]) {
                    educationalResources[category].forEach(resource => {
                        linksHTML += createResourceLink(widgetId, resource);
                    });
                }
            }
            
            linksContainer.innerHTML = linksHTML;
        }

        function createResourceLink(widgetId, resource) {
            return `
                <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', '${resource.url}')">
                    <div class="edu-link-icon">${resource.icon}</div>
                    <div class="edu-link-name">${resource.name}</div>
                </div>
            `;
        }

        function viewEduLink(widgetId, url) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            input.value = url;
            openResource(widgetId);
        }

        function expandView(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            
            widget.classList.add('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'inline-block';
            }
        }

        function toggleExpanded(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            const viewer = document.getElementById('viewer-' + widgetId);
            
            widget.classList.remove('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'none';
            }
            
            // Clear the iframe when collapsing
            if (viewer) {
                viewer.innerHTML = '';
            }
        }

        // Initialize with some default widgets
        window.onload = function() {
            addWidget('clock');
            addWidget('timer');
        };
    </script>
</body>
</html>
