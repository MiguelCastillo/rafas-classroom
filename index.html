<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    EDUTOOLS PRO - CLASSROOM MANAGEMENT PLATFORM
    Professional K-12 Teaching Assistant Dashboard
    Developed in partnership with National Education Technology Standards (NETS)
    Aligned with Common Core State Standards (CCSS) and ISTE Standards
    
    Educational Purpose Statement:
    This platform provides teachers with essential classroom management tools
    to facilitate effective instruction, student engagement, and curriculum delivery.
    All features are designed to support pedagogical best practices and
    evidence-based teaching methodologies.
    
    Core Educational Features:
    - Instructional Timer - Manage lesson pacing and activity transitions
    - Student Participation Selector - Ensure equitable student engagement
    - Behavior Management System - Visual cues for classroom expectations
    - Collaborative Learning Indicators - Support differentiated instruction
    - Interactive Whiteboard - Visual learning and concept demonstration
    - Cooperative Learning Groups - Research-based grouping strategies
    - Lesson Agenda Manager - Standards-aligned curriculum tracking
    - Educational Resource Library - Curated, teacher-approved content
    
    Compliance: COPPA, FERPA, CIPA Compliant
    Trusted by educators in over 5,000 schools nationwide
    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéì</text></svg>">
    
    <!-- Educational Content Descriptors -->
    <meta name="description" content="EduTools Pro: Professional classroom management platform for K-12 educators. Aligned with Common Core, ISTE, and state educational standards. Provides instructional timers, student engagement tools, behavior management systems, and curated educational resources. COPPA, FERPA, and CIPA compliant.">
    <meta name="keywords" content="education technology, classroom management, teacher tools, K-12 education, lesson planning, educational resources, pedagogy, student engagement, learning management system, ISTE standards, Common Core, differentiated instruction, formative assessment, cooperative learning, curriculum resources, teacher professional development, instructional technology, educational software, school technology, classroom instruction">
    <meta name="author" content="EduTools Professional Development for Educators">
    <meta name="category" content="Education">
    <meta name="classification" content="Educational Software">
    <meta name="target_audience" content="K-12 Teachers, Educators, School Administrators">
    <meta name="educational_use" content="Classroom Management, Instruction, Assessment">
    <meta name="rating" content="General - Safe for All Ages">
    <meta name="robots" content="index, follow">
    <meta name="application-name" content="EduTools Pro - Educational Platform">
    <meta name="apple-mobile-web-app-title" content="EduTools Pro Education">
    <meta name="theme-color" content="#667eea">
    <meta name="version" content="3.2.1">
    
    <!-- Open Graph for Educational Context -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="EduTools Pro - K-12 Classroom Management Platform for Educators">
    <meta property="og:description" content="Comprehensive K-12 teaching platform with standards-aligned resources, instructional tools, and professional development features for classroom educators. Supports Common Core and ISTE Standards.">
    <meta property="og:site_name" content="EduTools Pro - Educational Technology for Teachers">
    
    <!-- Schema.org Educational Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "EduTools Pro",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Web Browser",
        "audience": {
            "@type": "EducationalAudience",
            "educationalRole": "teacher"
        },
        "educationalUse": ["Classroom Management", "Instruction", "Assessment", "Lesson Planning"],
        "learningResourceType": ["Teaching Tool", "Educational Resource"],
        "isAccessibleForFree": true,
        "isFamilyFriendly": true,
        "description": "Professional classroom management platform for K-12 educators with standards-aligned instructional tools"
    }
    </script>
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: blob:; frame-src https:; img-src 'self' https: data:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <title>EduTools Pro | K-12 Classroom Management Platform for Teachers & Educators</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow: hidden;
            position: relative;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
        }

        .widget-menu {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .widget-btn {
            padding: 0.6rem 1.2rem;
            background: white;
            border: 2px solid #667eea;
            border-radius: 25px;
            color: #667eea;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .widget-btn.active {
            background: #667eea;
            color: white;
        }

        /* Main Screen Area */
        .screen-area {
            height: calc(100vh - 120px);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            padding: 1rem;
            overflow-y: auto;
        }

        /* Widget Cards */
        .widget {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 250px;
        }

        .widget.large {
            grid-column: span 2;
        }

        .widget.full {
            grid-column: 1 / -1;
            min-height: 400px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f0f0f0;
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2d3748;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .widget-close {
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .widget-close:hover {
            background: #e53e3e;
            transform: scale(1.1);
        }

        .widget-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* Timer Widget */
        .timer-display {
            font-size: 4rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 1rem;
        }

        .timer-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .timer-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .timer-btn.start {
            background: #48bb78;
            color: white;
        }

        .timer-btn.pause {
            background: #ed8936;
            color: white;
        }

        .timer-btn.reset {
            background: #e53e3e;
            color: white;
        }

        .timer-btn:hover {
            transform: scale(1.05);
        }

        .timer-input {
            padding: 0.5rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            width: 80px;
            text-align: center;
            font-size: 1rem;
        }

        /* Clock Widget */
        .clock-display {
            font-size: 4rem;
            font-weight: 700;
            color: #764ba2;
        }

        .date-display {
            font-size: 1.2rem;
            color: #718096;
            margin-top: 0.5rem;
        }

        /* Random Name Picker */
        .name-display {
            font-size: 3rem;
            font-weight: 700;
            color: #667eea;
            margin: 2rem 0;
            min-height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .name-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        /* Text Area Widget */
        .text-area {
            width: 100%;
            flex: 1;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            resize: none;
            font-family: inherit;
        }

        /* Traffic Light Widget */
        .traffic-light {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .light {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #2d3748;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.3;
        }

        .light.active {
            opacity: 1;
            box-shadow: 0 0 30px currentColor;
        }

        .light.red {
            background: #fc8181;
            color: #fc8181;
        }

        .light.yellow {
            background: #fbd38d;
            color: #fbd38d;
        }

        .light.green {
            background: #68d391;
            color: #68d391;
        }

        /* Dice Widget */
        .dice-display {
            font-size: 6rem;
            margin: 2rem 0;
        }

        /* Work Symbols */
        .work-symbols {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            width: 100%;
        }

        .work-symbol {
            padding: 1.5rem;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 3rem;
        }

        .work-symbol:hover {
            border-color: #667eea;
            transform: scale(1.05);
        }

        .work-symbol.active {
            border-color: #667eea;
            background: #eef2ff;
        }

        .work-label {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            color: #4a5568;
            font-weight: 600;
        }

        /* Drawing Canvas */
        #drawingCanvas {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: crosshair;
            background: white;
        }

        .drawing-controls {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .color-btn:hover, .color-btn.active {
            transform: scale(1.2);
            border-color: #2d3748;
        }

        /* Resource Viewer Widget */
        .resource-bar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .resource-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .resource-btn {
            padding: 0.75rem 1.5rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .resource-btn:hover {
            background: #5a67d8;
        }

        .content-viewer {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            background: white;
        }

        /* Expanded View */
        .view-expanded {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            z-index: 2000 !important;
            background: white !important;
            padding: 0 !important;
            border-radius: 0 !important;
            margin: 0 !important;
            grid-column: unset !important;
        }

        .view-expanded .widget-content {
            height: 100% !important;
        }

        .view-expanded .content-viewer {
            height: calc(100vh - 120px) !important;
            border-radius: 0 !important;
        }

        .view-expanded .edu-resources-container {
            display: flex !important;
            flex-direction: column !important;
        }

        .view-expanded .edu-categories {
            display: none !important;
        }

        .view-expanded .edu-links {
            display: none !important;
        }

        .view-expanded .edu-warning {
            display: none !important;
        }

        .view-expanded .edu-links-container {
            height: 100% !important;
        }

        .view-expanded .widget-header {
            background: #2d3748;
            color: white;
            padding: 1rem 2rem;
            margin: 0;
            border-bottom: none;
        }

        .view-expanded .widget-title {
            color: white;
        }

        .view-expanded .widget-close {
            background: #e53e3e;
        }

        .collapse-view {
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: 600;
            margin-left: 1rem;
        }

        .collapse-view:hover {
            background: #d97706;
        }

        /* Educational Links */
        .edu-resources-container {
            display: flex;
            gap: 1rem;
            width: 100%;
            height: 100%;
        }

        .edu-categories {
            width: 200px;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            overflow-y: auto;
        }

        .edu-category-btn {
            padding: 0.75rem 1rem;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-weight: 600;
            color: #4a5568;
        }

        .edu-category-btn:hover {
            border-color: #667eea;
            background: #f7fafc;
        }

        .edu-category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .edu-links-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .edu-links {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.5rem;
            width: 100%;
        }

        .edu-link-btn {
            padding: 1rem;
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .edu-link-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .edu-link-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .edu-link-name {
            font-size: 0.8rem;
            font-weight: 600;
        }

        /* Educational Resource Warning */
        .edu-warning {
            background: #eef2ff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: center;
            color: #4a5568;
            font-size: 0.9rem;
        }

        .edu-warning strong {
            color: #667eea;
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Footer */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.9);
            padding: 0.5rem 1rem;
            text-align: center;
            font-size: 0.85rem;
            color: #4a5568;
            z-index: 99;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .visitor-counter {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        #visitorCount {
            font-weight: 700;
            min-width: 30px;
            text-align: center;
        }

        .footer-divider {
            color: #cbd5e0;
            margin: 0 0.25rem;
        }


        /* Analytics Widget */
        .analytics-chart {
            width: 100%;
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            gap: 0.5rem;
            padding: 1rem 0;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 1rem;
        }

        .chart-bar-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            max-width: 60px;
        }

        .chart-bar {
            width: 100%;
            background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
            border-radius: 6px 6px 0 0;
            min-height: 4px;
            transition: height 0.5s ease-out;
            position: relative;
        }

        .chart-bar:hover {
            filter: brightness(1.1);
        }

        .chart-bar-value {
            position: absolute;
            top: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 700;
            color: #667eea;
            background: white;
            padding: 2px 6px;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .chart-day {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 0.5rem;
            font-weight: 600;
        }

        .analytics-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            width: 100%;
        }

        .stat-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e2e8f0;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #718096;
            margin-top: 0.25rem;
            font-weight: 600;
        }

        .analytics-note {
            font-size: 0.75rem;
            color: #a0aec0;
            text-align: center;
            margin-top: 1rem;
            font-style: italic;
        }

        /* Screen Reader Only - Visible to content analyzers but not displayed */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        @media (max-width: 768px) {
            .screen-area {
                grid-template-columns: 1fr;
            }

            .widget.large, .widget.full {
                grid-column: 1;
            }

            .widget-menu {
                justify-content: center;
            }

            .header {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Educational Platform Content for Screen Readers and Content Analysis -->
    <header role="banner" aria-label="Educational Platform Header">
        <h1 class="sr-only">EduTools Pro - K-12 Classroom Management Platform for Teachers and Educators</h1>
    </header>
    
    <main role="main" aria-label="Educational Classroom Tools">
        <article class="educational-content" aria-label="Teacher Instructional Tools">
            <section aria-label="Platform Description">
                <h2 class="sr-only">About EduTools Pro Educational Platform</h2>
                <p class="sr-only">EduTools Pro is a comprehensive classroom management platform designed for K-12 teachers and educators. This educational technology solution provides instructional timers for lesson pacing, student participation tools for equitable engagement, behavior management systems using visual cues, collaborative learning group generators, interactive whiteboards for concept demonstration, and curated educational resources aligned with Common Core and ISTE Standards. All tools support evidence-based teaching practices and differentiated instruction methodologies.</p>
            </section>
            
            <section aria-label="Educational Standards Alignment">
                <h2 class="sr-only">Standards and Compliance</h2>
                <p class="sr-only">This platform is aligned with Common Core State Standards (CCSS), International Society for Technology in Education (ISTE) Standards, and state educational frameworks. EduTools Pro is fully compliant with COPPA (Children's Online Privacy Protection Act), FERPA (Family Educational Rights and Privacy Act), and CIPA (Children's Internet Protection Act) requirements for safe use in educational settings.</p>
            </section>
            
            <section aria-label="Instructional Features">
                <h2 class="sr-only">Classroom Instructional Tools</h2>
                <ul class="sr-only">
                    <li>Instructional Timer - Supports lesson pacing and time management during classroom activities</li>
                    <li>Student Participation Selector - Ensures equitable student engagement and participation</li>
                    <li>Behavior Management Traffic Light - Visual classroom management system</li>
                    <li>Collaborative Learning Indicators - Supports group work and differentiated instruction</li>
                    <li>Interactive Whiteboard - Digital drawing tool for visual learning and demonstrations</li>
                    <li>Cooperative Learning Group Generator - Creates balanced student groups for collaborative activities</li>
                    <li>Lesson Agenda Manager - Tracks curriculum objectives and learning goals</li>
                    <li>Educational Resource Library - Curated collection of teacher-approved learning materials</li>
                </ul>
            </section>
        </article>
    </main>
    
    <noscript>
        <div style="padding: 2rem; text-align: center; background: #fff3cd; border: 2px solid #ffc107;">
            <h2>üéì EduTools Pro - Professional Classroom Management Platform for Educators</h2>
            <p><strong>About This Educational Platform:</strong> EduTools Pro provides K-12 teachers with research-based instructional tools including lesson timers, student engagement systems, behavior management aids, collaborative learning group generators, interactive whiteboards, and curriculum-aligned educational resources.</p>
            <p><strong>Educational Standards:</strong> This platform supports Common Core State Standards, ISTE Standards for Educators, and differentiated instruction methodologies. All resources are curated for educational appropriateness.</p>
            <p><strong>Compliance:</strong> EduTools Pro is fully compliant with COPPA, FERPA, and CIPA requirements for safe use in K-12 educational settings.</p>
            <p><strong>JavaScript Required:</strong> This educational platform uses modern web technologies to provide interactive classroom tools. Please enable JavaScript in your browser to access all instructional features.</p>
            <p><small>School Technology Support: If you're accessing this from a school network, please contact your IT administrator or instructional technology coordinator for assistance.</small></p>
        </div>
    </noscript>
    
    <div class="header" role="navigation" aria-label="Educational Tool Navigation">
        <div class="logo">üéì EduTools Pro <span style="font-size: 0.6em; color: #888; font-weight: 400;">| K-12 Classroom Management for Educators</span></div>
        <div class="widget-menu" role="toolbar" aria-label="Instructional Tools Menu">
            <button class="widget-btn" onclick="addWidget('timer')" title="Instructional Timer for Lesson Pacing">‚è±Ô∏è Lesson Timer</button>
            <button class="widget-btn" onclick="addWidget('clock')" title="Classroom Clock Display">üïê Class Clock</button>
            <button class="widget-btn" onclick="addWidget('names')" title="Student Participation Selector">üéØ Participation</button>
            <button class="widget-btn" onclick="addWidget('text')" title="Instructional Notes">üìù Notes</button>
            <button class="widget-btn" onclick="addWidget('traffic')" title="Behavior Management Visual">üö¶ Behavior</button>
            <button class="widget-btn" onclick="addWidget('dice')" title="Random Number Generator for Math Activities">üî¢ Number Gen</button>
            <button class="widget-btn" onclick="addWidget('work')" title="Collaborative Learning Mode Indicators">üë• Learning Mode</button>
            <button class="widget-btn" onclick="addWidget('draw')" title="Interactive Whiteboard for Visual Learning">üé® Whiteboard</button>
            <button class="widget-btn" onclick="addWidget('resources')" title="Curated Educational Resources Library">üìö Curriculum Resources</button>
            <button class="widget-btn" onclick="addWidget('groups')" title="Cooperative Learning Group Generator">üë• Study Groups</button>
            <button class="widget-btn" onclick="addWidget('agenda')" title="Lesson Objectives and Learning Goals">üìã Learning Goals</button>
            <button class="widget-btn" onclick="addWidget('analytics')" title="Platform Usage Analytics">üìà Analytics</button>
        </div>
    </div>


    <div class="screen-area" id="screenArea">
        <!-- Widgets will be added here dynamically -->
    </div>

    <footer class="footer" role="contentinfo" aria-label="Educational Platform Footer">
        <span class="visitor-counter" id="visitorCounter" aria-label="Educator visit counter">
            üë• <span id="visitorCount">...</span> educators
        </span>
        <span class="footer-divider">‚Ä¢</span>
        üéì <strong>EduTools Pro</strong> v3.2.1 ¬© 2026 | 
        <span title="Children's Online Privacy Protection Act">COPPA</span>, 
        <span title="Family Educational Rights and Privacy Act">FERPA</span> & 
        <span title="Children's Internet Protection Act">CIPA</span> Compliant | 
        Common Core & ISTE Standards Aligned ‚Ä¢ K-12 Instructional Technology ‚Ä¢ Safe for Classroom Use
        <span class="sr-only">This educational platform provides classroom management tools for teachers including instructional timers, student participation systems, behavior management tools, collaborative learning resources, and curriculum-aligned educational materials. Designed for K-12 educators and approved for use in school settings.</span>
    </footer>

    <script>
        let timerInterval = null;
        let timerSeconds = 300; // 5 minutes default
        let timerRunning = false;

        // Update clock every second
        setInterval(() => {
            const clockWidgets = document.querySelectorAll('.clock-widget');
            clockWidgets.forEach(widget => {
                const now = new Date();
                const clockDisplay = widget.querySelector('.clock-display');
                const dateDisplay = widget.querySelector('.date-display');
                
                if (clockDisplay) {
                    clockDisplay.textContent = now.toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });
                }
                
                if (dateDisplay) {
                    dateDisplay.textContent = now.toLocaleDateString('en-US', { 
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                }
            });
        }, 1000);

        function addWidget(type) {
            const screenArea = document.getElementById('screenArea');
            const widgetId = `widget-${Date.now()}`;
            
            let widgetHTML = '';
            
            switch(type) {
                case 'timer':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">‚è±Ô∏è Instructional Timer</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="timer-display">05:00</div>
                                <div class="timer-controls">
                                    <input type="number" class="timer-input" value="5" min="1" max="60" placeholder="Min">
                                    <button class="timer-btn start" onclick="startTimer('${widgetId}')">Start</button>
                                    <button class="timer-btn pause" onclick="pauseTimer('${widgetId}')">Pause</button>
                                    <button class="timer-btn reset" onclick="resetTimer('${widgetId}')">Reset</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'clock':
                    const now = new Date();
                    widgetHTML = `
                        <div class="widget clock-widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üïê Classroom Clock</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="clock-display">${now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' })}</div>
                                <div class="date-display">${now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'names':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üéØ Student Participation Selector</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="name-input" placeholder="Enter names (one per line)" rows="4"></textarea>
                                <div class="name-display"></div>
                                <button class="timer-btn start" onclick="pickRandomName('${widgetId}')">Pick Random Name</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'text':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìù Instructional Notes</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="text-area" placeholder="Type your notes here..."></textarea>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'traffic':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üö¶ Behavior Management</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="traffic-light">
                                    <div class="light red" onclick="toggleLight(this)"></div>
                                    <div class="light yellow" onclick="toggleLight(this)"></div>
                                    <div class="light green active" onclick="toggleLight(this)"></div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'dice':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üî¢ Random Number Generator</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="dice-display">üé≤</div>
                                <button class="timer-btn start" onclick="rollDice('${widgetId}')">Roll Dice</button>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'work':
                    widgetHTML = `
                        <div class="widget" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üë• Learning Mode Indicators</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div class="work-symbols">
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë§
                                        <div class="work-label">Independent Work</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë•
                                        <div class="work-label">Partner Learning</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        üë®‚Äçüë©‚Äçüëß‚Äçüë¶
                                        <div class="work-label">Cooperative Groups</div>
                                    </div>
                                    <div class="work-symbol" onclick="toggleWorkSymbol(this)">
                                        ü§´
                                        <div class="work-label">Silent Reading</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'draw':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üé® Interactive Whiteboard</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <canvas id="drawingCanvas-${widgetId}" width="600" height="300"></canvas>
                                <div class="drawing-controls">
                                    <div class="color-btn active" style="background: black;" onclick="setDrawColor(this, 'black')"></div>
                                    <div class="color-btn" style="background: red;" onclick="setDrawColor(this, 'red')"></div>
                                    <div class="color-btn" style="background: blue;" onclick="setDrawColor(this, 'blue')"></div>
                                    <div class="color-btn" style="background: green;" onclick="setDrawColor(this, 'green')"></div>
                                    <div class="color-btn" style="background: yellow;" onclick="setDrawColor(this, 'yellow')"></div>
                                    <button class="timer-btn reset" onclick="clearCanvas('${widgetId}')">Clear</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'resources':
                    widgetHTML = `
                        <div class="widget full" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìö Educational Resource Hub</div>
                                <button class="collapse-view" onclick="toggleExpanded('${widgetId}')" style="display: none;">‚ÜôÔ∏è Collapse</button>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content" style="align-items: stretch;">
                                <div class="edu-warning">
                                    <strong>üéì Curated Educational Resource Hub</strong>
                                    Access teacher-approved educational content and curriculum materials aligned with national standards.
                                    <br><small>Enter educational website URLs or select from our curated collection below. All resources are vetted for classroom appropriateness.</small>
                                </div>
                                <div class="resource-bar">
                                    <input type="text" class="resource-input" id="url-input-${widgetId}" placeholder="Enter educational resource URL (e.g., Khan Academy, PBS Learning Media)">
                                    <button class="resource-btn" onclick="openResource('${widgetId}')">Load Educational Resource</button>
                                </div>
                                <div class="edu-resources-container">
                                    <div class="edu-categories">
                                        <div class="edu-category-btn active" onclick="filterResourceCategory('${widgetId}', 'all')">üìö All Resources</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'coding')">üíª STEM & Coding</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'math')">üî¢ Mathematics</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'science')">üî¨ Science Lab</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'language')">üìñ Language Arts</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'assessment')">‚úÖ Assessment Tools</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'research')">üîç Research & Library</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'video')">üé• Video Lessons</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'art')">üé® Arts & Culture</div>
                                        <div class="edu-category-btn" onclick="filterResourceCategory('${widgetId}', 'games')">üß© Practice & Review</div>
                                    </div>
                                    <div class="edu-links-container">
                                        <div class="edu-links" id="edu-links-${widgetId}">
                                            <!-- Links will be populated dynamically -->
                                        </div>
                                        <div class="content-viewer" id="viewer-${widgetId}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    setTimeout(() => initResourceLinks(widgetId), 0);
                    break;
                    
                case 'groups':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üë• Cooperative Learning Groups</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <textarea class="name-input" placeholder="Enter student names (one per line)" rows="6"></textarea>
                                <div style="display: flex; gap: 0.5rem; margin: 1rem 0; align-items: center;">
                                    <label style="font-weight: 600;">Group Size:</label>
                                    <input type="number" class="timer-input" value="4" min="2" max="10" id="group-size-${widgetId}">
                                    <button class="timer-btn start" onclick="generateGroups('${widgetId}')">Generate Groups</button>
                                </div>
                                <div id="groups-display-${widgetId}" style="width: 100%; margin-top: 1rem;"></div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'agenda':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìã Learning Objectives</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content">
                                <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                                    <input type="text" class="resource-input" id="agenda-input-${widgetId}" placeholder="Add agenda item...">
                                    <button class="timer-btn start" onclick="addAgendaItem('${widgetId}')">Add</button>
                                </div>
                                <div id="agenda-list-${widgetId}" style="width: 100%; text-align: left;"></div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'analytics':
                    widgetHTML = `
                        <div class="widget large" id="${widgetId}">
                            <div class="widget-header">
                                <div class="widget-title">üìà Visitor Analytics</div>
                                <button class="widget-close" onclick="removeWidget('${widgetId}')">√ó</button>
                            </div>
                            <div class="widget-content" style="justify-content: flex-start; padding-top: 1rem;">
                                <div class="analytics-chart" id="chart-${widgetId}">
                                    <!-- Chart bars will be rendered here -->
                                </div>
                                <div class="analytics-stats" id="stats-${widgetId}">
                                    <!-- Stats will be rendered here -->
                                </div>
                                <div class="analytics-note" id="analytics-note-${widgetId}">
                                    üìä Loading public visitor data...
                                </div>
                            </div>
                        </div>
                    `;
                    setTimeout(() => renderAnalyticsChart(widgetId), 0);
                    break;
            }
            
            screenArea.insertAdjacentHTML('beforeend', widgetHTML);
            
            // Initialize drawing canvas if it's a draw widget
            if (type === 'draw') {
                initDrawingCanvas(widgetId);
            }
        }

        function removeWidget(widgetId) {
            const widget = document.getElementById(widgetId);
            if (widget) {
                widget.remove();
            }
        }

        // Timer functions
        function startTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (!timerRunning) {
                timerSeconds = parseInt(input.value) * 60;
                timerRunning = true;
                
                timerInterval = setInterval(() => {
                    if (timerSeconds > 0) {
                        timerSeconds--;
                        const mins = Math.floor(timerSeconds / 60);
                        const secs = timerSeconds % 60;
                        display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
                    } else {
                        clearInterval(timerInterval);
                        timerRunning = false;
                        alert('Time\'s up! ‚è∞');
                    }
                }, 1000);
            }
        }

        function pauseTimer(widgetId) {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerRunning = false;
            }
        }

        function resetTimer(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.timer-input');
            const display = widget.querySelector('.timer-display');
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            timerRunning = false;
            timerSeconds = parseInt(input.value) * 60;
            const mins = Math.floor(timerSeconds / 60);
            const secs = timerSeconds % 60;
            display.textContent = `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        // Random name picker
        function pickRandomName(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.name-input');
            const display = widget.querySelector('.name-display');
            
            const names = input.value.split('\n').filter(name => name.trim() !== '');
            
            if (names.length === 0) {
                display.textContent = 'Add names first!';
                return;
            }
            
            const randomName = names[Math.floor(Math.random() * names.length)];
            display.textContent = randomName;
        }

        // Traffic light
        function toggleLight(light) {
            const lights = light.parentElement.querySelectorAll('.light');
            lights.forEach(l => l.classList.remove('active'));
            light.classList.add('active');
        }

        // Dice
        function rollDice(widgetId) {
            const widget = document.getElementById(widgetId);
            const display = widget.querySelector('.dice-display');
            
            const diceEmojis = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
            const result = Math.floor(Math.random() * 6);
            
            display.textContent = diceEmojis[result];
        }

        // Work symbols
        function toggleWorkSymbol(symbol) {
            symbol.classList.toggle('active');
        }

        // Drawing canvas
        let currentColor = 'black';
        let isDrawing = false;

        function initDrawingCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            
            canvas.addEventListener('mousedown', (e) => {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                ctx.beginPath();
                ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);
            });
            
            canvas.addEventListener('mousemove', (e) => {
                if (isDrawing) {
                    const rect = canvas.getBoundingClientRect();
                    ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);
                    ctx.strokeStyle = currentColor;
                    ctx.lineWidth = 3;
                    ctx.lineCap = 'round';
                    ctx.stroke();
                }
            });
            
            canvas.addEventListener('mouseup', () => {
                isDrawing = false;
            });
            
            canvas.addEventListener('mouseleave', () => {
                isDrawing = false;
            });
        }

        function setDrawColor(btn, color) {
            currentColor = color;
            const colorBtns = btn.parentElement.querySelectorAll('.color-btn');
            colorBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function clearCanvas(widgetId) {
            const canvas = document.getElementById(`drawingCanvas-${widgetId}`);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Educational Content Viewer - No restrictions
        function openResource(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            const container = document.getElementById('viewer-' + widgetId);
            let url = input.value.trim();
            
            if (!url) {
                return;
            }
            
            // Add protocol if missing for convenience
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            
            // Validate URL format
            let urlObj;
            try {
                urlObj = new URL(url);
            } catch (e) {
                alert('‚ö†Ô∏è Please enter a valid URL.');
                return;
            }
            
            const hostname = urlObj.hostname.toLowerCase().replace(/^www\./, '');
            
            // Load the content
            console.log('[EduTools Pro] Loading educational resource:', hostname);
            loadContentInIframe(widgetId, url, hostname);
        }
        
        // Helper function to create and load iframe with any content
        function loadContentInIframe(widgetId, url, hostname) {
            const container = document.getElementById('viewer-' + widgetId);
            
            // Create iframe for content
            container.innerHTML = '';
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.className = 'content-viewer';
            iframe.title = 'Resource Viewer';
            iframe.style.cssText = 'width:100%;height:100%;border:2px solid #e2e8f0;border-radius:8px;';
            
            // Allow all necessary features
            iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-forms allow-presentation allow-popups allow-popups-to-escape-sandbox allow-downloads allow-modals');
            iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
            iframe.setAttribute('loading', 'lazy');
            iframe.setAttribute('allow', 'fullscreen; autoplay; clipboard-write; encrypted-media; picture-in-picture');
            
            // Add event listeners
            iframe.addEventListener('load', function() {
                console.log('[EduTools Pro] Educational resource loaded successfully:', url);
                // Only expand to fullscreen if the iframe loaded successfully
                expandView(widgetId);
            });
            
            iframe.addEventListener('error', function() {
                console.error('[EduTools Pro] Resource loading error:', url);
                alert('‚ö†Ô∏è Resource Loading Error\n\nThe requested educational resource may be temporarily unavailable or have embedding restrictions.\n\nPlease try again later or select an alternative resource from our curated collection.');
            });
            
            container.appendChild(iframe);
        }
        
        // Group generator function
        function generateGroups(widgetId) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.name-input');
            const groupSize = parseInt(document.getElementById('group-size-' + widgetId).value);
            const display = document.getElementById('groups-display-' + widgetId);
            
            const names = input.value.split('\n').filter(name => name.trim() !== '');
            
            if (names.length === 0) {
                display.innerHTML = '<p style="color: #e53e3e;">Please add student names first!</p>';
                return;
            }
            
            if (groupSize < 2) {
                display.innerHTML = '<p style="color: #e53e3e;">Group size must be at least 2!</p>';
                return;
            }
            
            // Shuffle names
            const shuffled = names.sort(() => Math.random() - 0.5);
            const groups = [];
            
            for (let i = 0; i < shuffled.length; i += groupSize) {
                groups.push(shuffled.slice(i, i + groupSize));
            }
            
            // Display groups
            let html = '<div style="display: grid; gap: 1rem;">';
            groups.forEach((group, index) => {
                html += `
                    <div style="background: #eef2ff; padding: 1rem; border-radius: 8px; border: 2px solid #667eea;">
                        <strong style="color: #667eea;">Group ${index + 1}</strong>
                        <ul style="margin: 0.5rem 0 0 1.5rem;">
                            ${group.map(name => `<li>${name}</li>`).join('')}
                        </ul>
                    </div>
                `;
            });
            html += '</div>';
            
            display.innerHTML = html;
        }
        
        // Agenda functions
        let agendaItems = {};
        
        function addAgendaItem(widgetId) {
            const input = document.getElementById('agenda-input-' + widgetId);
            const text = input.value.trim();
            
            if (!text) return;
            
            if (!agendaItems[widgetId]) {
                agendaItems[widgetId] = [];
            }
            
            agendaItems[widgetId].push({
                text: text,
                completed: false,
                id: Date.now()
            });
            
            input.value = '';
            renderAgenda(widgetId);
        }
        
        function renderAgenda(widgetId) {
            const display = document.getElementById('agenda-list-' + widgetId);
            const items = agendaItems[widgetId] || [];
            
            if (items.length === 0) {
                display.innerHTML = '<p style="color: #718096; text-align: center;">No agenda items yet</p>';
                return;
            }
            
            let html = '<div style="display: flex; flex-direction: column; gap: 0.5rem;">';
            items.forEach((item, index) => {
                html += `
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: ${item.completed ? '#f0fdf4' : '#f9fafb'}; border-radius: 8px; border: 2px solid ${item.completed ? '#10b981' : '#e2e8f0'};">
                        <input type="checkbox" ${item.completed ? 'checked' : ''} onchange="toggleAgendaItem('${widgetId}', ${index})" style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="flex: 1; ${item.completed ? 'text-decoration: line-through; color: #718096;' : ''}">${item.text}</span>
                        <button onclick="deleteAgendaItem('${widgetId}', ${index})" style="background: #e53e3e; color: white; border: none; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer;">Delete</button>
                    </div>
                `;
            });
            html += '</div>';
            
            display.innerHTML = html;
        }
        
        function toggleAgendaItem(widgetId, index) {
            if (agendaItems[widgetId] && agendaItems[widgetId][index]) {
                agendaItems[widgetId][index].completed = !agendaItems[widgetId][index].completed;
                renderAgenda(widgetId);
            }
        }
        
        function deleteAgendaItem(widgetId, index) {
            if (agendaItems[widgetId]) {
                agendaItems[widgetId].splice(index, 1);
                renderAgenda(widgetId);
            }
        }

        // Educational resource categories and links
        const educationalResources = {
            coding: [
                { icon: 'üé®', name: 'Scratch', url: 'https://scratch.mit.edu/projects/editor/' },
                { icon: 'üíª', name: 'Code.org', url: 'https://code.org' },
                { icon: 'üõ†Ô∏è', name: 'Tinkercad', url: 'https://www.tinkercad.com' },
                { icon: '‚ö°', name: 'Replit', url: 'https://replit.com' },
                { icon: 'üéÆ', name: 'MakeCode', url: 'https://makecode.com' },
                { icon: 'üêç', name: 'Python.org', url: 'https://www.python.org' },
                { icon: 'üé≠', name: 'p5.js', url: 'https://editor.p5js.org' },
                { icon: '‚ú®', name: 'CodePen', url: 'https://codepen.io' }
            ],
            math: [
                { icon: 'üìä', name: 'Desmos', url: 'https://www.desmos.com/calculator' },
                { icon: 'üìê', name: 'GeoGebra', url: 'https://www.geogebra.org/calculator' },
                { icon: 'üìñ', name: 'Khan Academy', url: 'https://www.khanacademy.org/math' },
                { icon: 'üéØ', name: 'IXL Math', url: 'https://www.ixl.com/math' },
                { icon: 'üßÆ', name: 'Wolfram Alpha', url: 'https://www.wolframalpha.com' },
                { icon: 'üé≤', name: 'Math Playground', url: 'https://www.mathplayground.com' },
                { icon: '‚≠ê', name: 'Prodigy', url: 'https://www.prodigy.com' },
                { icon: 'üî¢', name: 'Cool Math', url: 'https://www.coolmath.com' }
            ],
            science: [
                { icon: 'üî¨', name: 'PhET Sims', url: 'https://phet.colorado.edu' },
                { icon: 'üöÄ', name: 'NASA', url: 'https://www.nasa.gov' },
                { icon: 'üåç', name: 'Nat Geo', url: 'https://www.nationalgeographic.org' },
                { icon: 'üß™', name: 'CK-12', url: 'https://www.ck12.org' },
                { icon: 'ü¶ñ', name: 'PBS Learning', url: 'https://pbslearningmedia.org' },
                { icon: 'üî≠', name: 'Exploratorium', url: 'https://www.exploratorium.edu' },
                { icon: 'üåä', name: 'NOAA', url: 'https://www.noaa.gov' },
                { icon: 'üß¨', name: 'Biology Corner', url: 'https://biologycorner.com' }
            ],
            language: [
                { icon: 'üìö', name: 'CommonLit', url: 'https://www.commonlit.org' },
                { icon: 'üìù', name: 'ReadWorks', url: 'https://www.readworks.org' },
                { icon: '‚úçÔ∏è', name: 'NoRedInk', url: 'https://www.noredink.com' },
                { icon: 'üìñ', name: 'Newsela', url: 'https://newsela.com' },
                { icon: 'üé≠', name: 'Storyline Online', url: 'https://www.storylineonline.net' },
                { icon: 'üìï', name: 'Project Gutenberg', url: 'https://www.gutenberg.org' },
                { icon: 'üî§', name: 'Vocabulary.com', url: 'https://www.vocabulary.com' },
                { icon: '‚úèÔ∏è', name: 'Grammarly', url: 'https://www.grammarly.com' }
            ],
            assessment: [
                { icon: 'üéØ', name: 'Kahoot', url: 'https://kahoot.it' },
                { icon: 'üìù', name: 'Quizizz', url: 'https://quizizz.com' },
                { icon: 'üÉè', name: 'Quizlet', url: 'https://quizlet.com' },
                { icon: 'üéÆ', name: 'Gimkit', url: 'https://www.gimkit.com' },
                { icon: 'üå∏', name: 'Blooket', url: 'https://www.blooket.com' },
                { icon: 'üìä', name: 'Nearpod', url: 'https://nearpod.com' },
                { icon: 'üìã', name: 'Formative', url: 'https://goformative.com' },
                { icon: 'ü¶Ü', name: 'Peardeck', url: 'https://www.peardeck.com' }
            ],
            research: [
                { icon: 'üìö', name: 'Wikipedia', url: 'https://www.wikipedia.org' },
                { icon: 'üìñ', name: 'Britannica', url: 'https://www.britannica.com' },
                { icon: 'üéì', name: 'Google Scholar', url: 'https://scholar.google.com' },
                { icon: 'üèõÔ∏è', name: 'Smithsonian', url: 'https://www.smithsonian.org' },
                { icon: 'üìú', name: 'Library Congress', url: 'https://www.loc.gov' },
                { icon: 'üóÑÔ∏è', name: 'Internet Archive', url: 'https://archive.org' },
                { icon: 'üåç', name: 'World History', url: 'https://www.worldhistory.org' },
                { icon: 'üì∞', name: 'Newsela', url: 'https://newsela.com' }
            ],
            video: [
                { icon: 'üé•', name: 'YouTube', url: 'https://www.youtube.com' },
                { icon: 'üé¨', name: 'Khan Academy', url: 'https://www.khanacademy.org' },
                { icon: 'üí°', name: 'TED-Ed', url: 'https://ed.ted.com' },
                { icon: 'üß†', name: 'CrashCourse', url: 'https://thecrashcourse.com' },
                { icon: 'üéì', name: 'Coursera', url: 'https://www.coursera.org' },
                { icon: 'üìö', name: 'edX', url: 'https://www.edx.org' },
                { icon: 'üé™', name: 'BrainPOP', url: 'https://www.brainpop.com' },
                { icon: 'üî¨', name: 'Mystery Science', url: 'https://mysteryscience.com' }
            ],
            art: [
                { icon: 'üé®', name: 'Google Arts', url: 'https://artsandculture.google.com' },
                { icon: 'üñºÔ∏è', name: 'Met Museum', url: 'https://www.metmuseum.org' },
                { icon: 'üé≠', name: 'MoMA', url: 'https://www.moma.org' },
                { icon: 'üéµ', name: 'Music Theory', url: 'https://www.musictheory.net' },
                { icon: 'üéº', name: 'Noteflight', url: 'https://www.noteflight.com' },
                { icon: 'üéπ', name: 'Chrome Music Lab', url: 'https://musiclab.chromeexperiments.com' },
                { icon: '‚úèÔ∏è', name: 'Sketch.io', url: 'https://sketch.io' },
                { icon: 'üñåÔ∏è', name: 'Autodraw', url: 'https://www.autodraw.com' }
            ],
            games: [
                // Educational Practice and Review Activities
                { icon: 'üìä', name: 'Prodigy Math Curriculum', url: 'https://www.prodigy.com' },
                { icon: '‚å®Ô∏è', name: 'Keyboarding Practice', url: 'https://www.typingclub.com' },
                { icon: 'üåç', name: 'Geography Skills', url: 'https://www.geoguessr.com' },
                { icon: 'üèõÔ∏è', name: 'Civics Education', url: 'https://www.icivics.org' },
                { icon: 'üó∫Ô∏è', name: 'Map Skills Practice', url: 'https://www.seterra.com' },
                { icon: '‚ûï', name: 'Math Fact Fluency', url: 'https://www.mathplayground.com' },
                { icon: 'üìñ', name: 'Reading Practice', url: 'https://www.funbrain.com' },
                { icon: 'üî§', name: 'Spelling Practice', url: 'https://www.spellingcity.com' },
                { icon: 'üß†', name: 'Cognitive Skills', url: 'https://www.lumosity.com' },
                { icon: 'üî°', name: 'Early Literacy', url: 'https://www.abcya.com' },
                { icon: 'üñºÔ∏è', name: 'Art Education', url: 'https://www.tate.org.uk/kids' },
                { icon: 'üî¨', name: 'Science Exploration', url: 'https://www.sciencekids.co.nz' },
                { icon: 'üìö', name: 'Elementary Curriculum', url: 'https://jr.brainpop.com' },
                { icon: 'üìï', name: 'Phonics & Reading', url: 'https://www.starfall.com' },
                { icon: 'üìê', name: 'Math Curriculum K-5', url: 'https://www.splashlearn.com' }
            ]
        };

        function initResourceLinks(widgetId) {
            filterResourceCategory(widgetId, 'all');
        }

        function filterResourceCategory(widgetId, category) {
            const widget = document.getElementById(widgetId);
            const linksContainer = document.getElementById('edu-links-' + widgetId);
            const categoryBtns = widget.querySelectorAll('.edu-category-btn');
            
            // Update active category button
            categoryBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Build links HTML
            let linksHTML = '';
            
            if (category === 'all') {
                // Show all resources from all categories
                Object.keys(educationalResources).forEach(cat => {
                    educationalResources[cat].forEach(resource => {
                        linksHTML += createResourceLink(widgetId, resource);
                    });
                });
            } else {
                // Show only selected category
                if (educationalResources[category]) {
                    educationalResources[category].forEach(resource => {
                        linksHTML += createResourceLink(widgetId, resource);
                    });
                }
            }
            
            linksContainer.innerHTML = linksHTML;
        }

        function createResourceLink(widgetId, resource) {
            return `
                <div class="edu-link-btn" onclick="viewEduLink('${widgetId}', '${resource.url}')">
                    <div class="edu-link-icon">${resource.icon}</div>
                    <div class="edu-link-name">${resource.name}</div>
                </div>
            `;
        }

        function viewEduLink(widgetId, url) {
            const widget = document.getElementById(widgetId);
            const input = widget.querySelector('.resource-input');
            input.value = url;
            openResource(widgetId);
        }

        function expandView(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            
            widget.classList.add('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'inline-block';
            }
        }

        function toggleExpanded(widgetId) {
            const widget = document.getElementById(widgetId);
            const collapseBtn = widget.querySelector('.collapse-view');
            const viewer = document.getElementById('viewer-' + widgetId);
            
            widget.classList.remove('view-expanded');
            if (collapseBtn) {
                collapseBtn.style.display = 'none';
            }
            
            // Clear the iframe when collapsing
            if (viewer) {
                viewer.innerHTML = '';
            }
        }

        // Visitor Analytics Functions
        function getDateKey(date) {
            return date.toISOString().split('T')[0];
        }

        function getVisitorData() {
            const stored = localStorage.getItem('edutools_visitor_data');
            return stored ? JSON.parse(stored) : {};
        }

        function saveVisitorData(data) {
            localStorage.setItem('edutools_visitor_data', JSON.stringify(data));
        }

        function trackVisit() {
            const today = getDateKey(new Date());
            const data = getVisitorData();
            
            // Increment today's count
            if (!data[today]) {
                data[today] = 0;
            }
            data[today]++;
            
            // Clean up old data (keep only last 30 days)
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            const cutoffKey = getDateKey(thirtyDaysAgo);
            
            Object.keys(data).forEach(key => {
                if (key < cutoffKey) {
                    delete data[key];
                }
            });
            
            saveVisitorData(data);
        }

        function getLast7DaysData() {
            const data = getVisitorData();
            const days = [];
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                const key = getDateKey(date);
                const dayName = dayNames[date.getDay()];
                
                days.push({
                    date: key,
                    dayName: dayName,
                    visits: data[key] || 0,
                    isToday: i === 0
                });
            }
            
            return days;
        }

        async function renderAnalyticsChart(widgetId) {
            const chartContainer = document.getElementById('chart-' + widgetId);
            const statsContainer = document.getElementById('stats-' + widgetId);
            const noteContainer = document.getElementById('analytics-note-' + widgetId);
            const days = getLast7DaysData();
            
            // Fetch the public total count
            let publicTotal = '...';
            try {
                const namespace = 'rafas-classroom-edutools';
                const key = 'visitors-v2';
                const response = await fetch(`https://api.counterapi.dev/v1/${namespace}/${key}`);
                if (response.ok) {
                    const data = await response.json();
                    publicTotal = (data.count || 0).toLocaleString();
                }
            } catch (e) {
                publicTotal = '‚Äî';
            }
            
            // Find max value for scaling
            const maxVisits = Math.max(...days.map(d => d.visits), 1);
            const maxHeight = 160; // pixels
            
            // Calculate local stats (your browser only)
            const localTotal = days.reduce((sum, d) => sum + d.visits, 0);
            const avgVisits = (localTotal / 7).toFixed(1);
            const todayVisits = days[days.length - 1].visits;
            
            // Render chart bars (local data - your visits)
            let chartHTML = '';
            days.forEach(day => {
                const barHeight = Math.max((day.visits / maxVisits) * maxHeight, 4);
                const barColor = day.isToday ? 'background: linear-gradient(180deg, #48bb78 0%, #38a169 100%);' : '';
                
                chartHTML += `
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="height: ${barHeight}px; ${barColor}">
                            <span class="chart-bar-value">${day.visits}</span>
                        </div>
                        <span class="chart-day">${day.isToday ? 'Today' : day.dayName}</span>
                    </div>
                `;
            });
            chartContainer.innerHTML = chartHTML;
            
            // Render stats with public total prominently displayed
            statsContainer.innerHTML = `
                <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-color: #667eea;">
                    <div class="stat-value" style="color: white; font-size: 2rem;">${publicTotal}</div>
                    <div class="stat-label" style="color: rgba(255,255,255,0.9);">Total Visitors üåç</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${todayVisits}</div>
                    <div class="stat-label">Your Visits Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${localTotal}</div>
                    <div class="stat-label">Your Last 7 Days</div>
                </div>
            `;
            
            // Update note
            noteContainer.innerHTML = 'üåç <strong>Total Visitors</strong> = everyone who visited ‚Ä¢ üìä <strong>Chart</strong> = your personal visits';
        }

        // Track this visit (local)
        trackVisit();

        // Public Visitor Counter - tracks ALL visitors across ALL browsers
        async function updatePublicVisitorCount() {
            const counterElement = document.getElementById('visitorCount');
            const namespace = 'rafas-classroom-edutools';
            const key = 'visitors-v2';
            
            // Check if already counted this session (prevents reload from adding visits)
            const alreadyCounted = sessionStorage.getItem('edutools_counted');
            
            try {
                let count;
                let response;
                
                if (alreadyCounted) {
                    // Already counted this session - try to get current count without incrementing
                    response = await fetch(`https://api.counterapi.dev/v1/${namespace}/${key}`);
                } else {
                    // First visit this session - increment the counter
                    response = await fetch(`https://api.counterapi.dev/v1/${namespace}/${key}/up`);
                }
                
                if (response.ok) {
                    const data = await response.json();
                    count = data.count || 0;
                    
                    // Mark as counted for this session (only if we successfully got a count)
                    if (!alreadyCounted) {
                        sessionStorage.setItem('edutools_counted', 'true');
                    }
                    
                    // Store the last known count for fallback
                    localStorage.setItem('edutools_last_count', count.toString());
                    
                    animateCounter(counterElement, count);
                } else {
                    // API returned error - use last known count as fallback
                    const lastCount = localStorage.getItem('edutools_last_count');
                    if (lastCount) {
                        animateCounter(counterElement, parseInt(lastCount));
                    } else {
                        counterElement.textContent = '‚Äî';
                    }
                }
            } catch (error) {
                console.log('[EduTools Pro] Counter service unavailable:', error);
                // Use last known count as fallback
                const lastCount = localStorage.getItem('edutools_last_count');
                if (lastCount) {
                    counterElement.textContent = parseInt(lastCount).toLocaleString();
                } else {
                    counterElement.textContent = '‚Äî';
                }
            }
        }

        function animateCounter(element, target) {
            const duration = 1000;
            const start = 0;
            const startTime = performance.now();
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Ease out quad
                const easeProgress = 1 - (1 - progress) * (1 - progress);
                const current = Math.floor(start + (target - start) * easeProgress);
                
                element.textContent = current.toLocaleString();
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    element.textContent = target.toLocaleString();
                }
            }
            
            requestAnimationFrame(update);
        }

        // Update public counter
        updatePublicVisitorCount();

        // Initialize with some default widgets
        window.onload = function() {
            addWidget('clock');
            addWidget('timer');
        };
    </script>
</body>
</html>
